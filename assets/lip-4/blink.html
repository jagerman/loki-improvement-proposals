<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Loki Blink Design</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">

html {
font-size: 100%;
overflow-y: scroll;
-webkit-text-size-adjust: 100%;
-ms-text-size-adjust: 100%;
}
body {
color: #444;
font-family: Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', serif;
font-size: 12px;
line-height: 1.7;
padding: 1em;
margin: auto;
max-width: 52em;
background: #fefefe;
}
a {
color: #0645ad;
text-decoration: none;
}
a:visited {
color: #0b0080;
}
a:hover {
color: #06e;
}
a:active {
color: #faa700;
}
a:focus {
outline: thin dotted;
}
*::-moz-selection {
background: rgba(255, 255, 0, 0.3);
color: #000;
}
*::selection {
background: rgba(255, 255, 0, 0.3);
color: #000;
}
a::-moz-selection {
background: rgba(255, 255, 0, 0.3);
color: #0645ad;
}
a::selection {
background: rgba(255, 255, 0, 0.3);
color: #0645ad;
}
p {
margin: 1em 0;
}
img {
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
color: #111;
line-height: 125%;
margin-top: 2em;
font-weight: normal;
}
h4, h5, h6 {
font-weight: bold;
}
h1 {
font-size: 2.5em;
}
h2 {
font-size: 2em;
}
h3 {
font-size: 1.5em;
}
h4 {
font-size: 1.2em;
}
h5 {
font-size: 1em;
}
h6 {
font-size: 0.9em;
}
blockquote {
color: #666666;
margin: 0;
padding-left: 3em;
border-left: 0.5em #EEE solid;
}
hr {
display: block;
height: 2px;
border: 0;
border-top: 1px solid #aaa;
border-bottom: 1px solid #eee;
margin: 1em 0;
padding: 0;
}
pre, code, kbd, samp {
color: #000;
font-family: monospace, monospace;
_font-family: 'courier new', monospace;
font-size: 0.98em;
}
pre {
white-space: pre;
white-space: pre-wrap;
word-wrap: break-word;
}
b, strong {
font-weight: bold;
}
dfn {
font-style: italic;
}
ins {
background: #ff9;
color: #000;
text-decoration: none;
}
mark {
background: #ff0;
color: #000;
font-style: italic;
font-weight: bold;
}
sub, sup {
font-size: 75%;
line-height: 0;
position: relative;
vertical-align: baseline;
}
sup {
top: -0.5em;
}
sub {
bottom: -0.25em;
}
ul, ol {
margin: 1em 0;
padding: 0 0 0 2em;
}
li p:last-child {
margin-bottom: 0;
}
ul ul, ol ol {
margin: .3em 0;
}
dl {
margin-bottom: 1em;
}
dt {
font-weight: bold;
margin-bottom: .8em;
}
dd {
margin: 0 0 .8em 2em;
}
dd:last-child {
margin-bottom: 0;
}
img {
border: 0;
-ms-interpolation-mode: bicubic;
vertical-align: middle;
}
figure {
display: block;
text-align: center;
margin: 1em 0;
}
figure img {
border: none;
margin: 0 auto;
}
figcaption {
font-size: 14px;
font-style: italic;
margin: 0 0 .8em;
}
table {
margin-bottom: 2em;
border-bottom: 1px solid #ddd;
border-right: 1px solid #ddd;
border-spacing: 0;
border-collapse: collapse;
}
table th {
padding: .2em 1em;
background-color: #eee;
border-top: 1px solid #ddd;
border-left: 1px solid #ddd;
}
table td {
padding: .2em 1em;
border-top: 1px solid #ddd;
border-left: 1px solid #ddd;
vertical-align: top;
}
.author {
font-size: 1.2em;
text-align: center;
}
@media only screen and (min-width: 480px) {
body {
font-size: 14px;
}
}
@media only screen and (min-width: 768px) {
body {
font-size: 16px;
}
}
@media print {
* {
background: transparent !important;
color: black !important;
filter: none !important;
-ms-filter: none !important;
}
body {
font-size: 12pt;
max-width: 100%;
}
a, a:visited {
text-decoration: underline;
}
hr {
height: 1px;
border: 0;
border-bottom: 1px solid black;
}
a[href]:after {
content: " (" attr(href) ")";
}
abbr[title]:after {
content: " (" attr(title) ")";
}
.ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
content: "";
}
pre, blockquote {
border: 1px solid #999;
padding-right: 1em;
page-break-inside: avoid;
}
tr, img {
page-break-inside: avoid;
}
img {
max-width: 100% !important;
}
@page :left {
margin: 15mm 20mm 15mm 10mm;
}
@page :right {
margin: 15mm 10mm 15mm 20mm;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3 {
page-break-after: avoid;
}
}
</style>
  <style type="text/css">.footnotes {
margin-top: 64px;
}
.footnotes:before {
content: "Footnotes";
font-size: 32px;
font-style: italic;
}
</style>
</head>
<body>
<h1>Loki Blink Design</h1>
<nav id="TOC">
<ul>
<li><a href="#version-history">Version history</a></li>
<li><a href="#summary">1 Summary</a></li>
<li><a href="#abstract">2 Abstract</a></li>
<li><a href="#blink-from-the-user-perspective">3 Blink from the user perspective</a><ul>
<li><a href="#wallet-side">3.1 Wallet side</a></li>
<li><a href="#re-blinking">3.2 Re-blinking</a></li>
<li><a href="#fees">3.3 Fees</a></li>
</ul></li>
<li><a href="#technical-design">4 Technical design</a><ul>
<li><a href="#transaction-overview">4.1 Transaction overview</a></li>
<li><a href="#quorum-selection">4.2 Quorum selection</a><ul>
<li><a href="#overlapping-quorums-rationale">4.2.1 Overlapping quorums rationale</a></li>
<li><a href="#quorum-selection-block-and-checkpointing-rationale">4.2.2 Quorum selection block and checkpointing rationale</a></li>
</ul></li>
<li><a href="#quorum-validation">4.3 Quorum validation</a><ul>
<li><a href="#tx-example-one">4.3.1 TX example one</a></li>
<li><a href="#tx-example-two">4.3.2 TX example two</a></li>
<li><a href="#tx-example-three">4.3.3 TX example three</a></li>
</ul></li>
<li><a href="#repeated-signing-of-the-same-transaction">4.4 Repeated signing of the same transaction</a></li>
<li><a href="#signature-failure-key-images-may-stay-unblinkable-for-up-to-10-blocks.">4.5 Signature failure: key images may stay unblinkable (for up to 10 blocks).</a></li>
<li><a href="#blink-transactions-entering-the-mempool">4.6 Blink transactions entering the mempool</a></li>
<li><a href="#blink-transactions-entering-the-blockchain">4.7 Blink transactions entering the blockchain</a></li>
<li><a href="#re-blinking-implementation">4.8 Re-Blinking implementation</a></li>
<li><a href="#ring-signature-implications">4.9 Ring signature implications</a></li>
<li><a href="#blink-and-checkpoints">4.10 Blink and checkpoints</a></li>
<li><a href="#quorum-communication">4.11 Quorum communication</a></li>
<li><a href="#service-node-deregistrations">4.12 Service node deregistrations</a></li>
</ul></li>
<li><a href="#potential-attacks">5 Potential attacks</a><ul>
<li><a href="#double-spending-blink-tx-non-blink-tx">5.1 Double-spending Blink tx + non-Blink tx</a></li>
<li><a href="#double-spending-blink-blink">5.2 Double-spending Blink + Blink</a></li>
<li><a href="#quorum-hopping">5.3 Quorum hopping</a></li>
<li><a href="#signature-withholding">5.4 Signature withholding</a></li>
<li><a href="#attack-to-reorganize-the-blink-quorum">5.5 51% attack to reorganize the Blink quorum</a></li>
</ul></li>
<li><a href="#future-ideas">6 Future ideas</a><ul>
<li><a href="#dynamic-fees">6.1 Dynamic fees</a></li>
<li><a href="#merging-transactions">6.2 Merging transactions</a></li>
<li><a href="#allowing-different-blink-supermajority-levels">6.3 Allowing different Blink supermajority levels</a></li>
<li><a href="#quorum-communication-via-mesh-network">6.4 Quorum communication via mesh network</a></li>
<li><a href="#carrying-traffic-over-lokinet">6.5 Carrying traffic over lokinet</a></li>
</ul></li>
</ul>
</nav>
<h1 id="version-history">Version history</h1>
<ul>
<li><em>v0.9</em>
<ul>
<li>initial public draft</li>
</ul></li>
</ul>
<h1 id="summary">1 Summary</h1>
<p>Blink is Loki’s instant payment mechanism proposed in the original Loki whitepaper. Once completed, Blink will allow users to send payments instantly to each other and allow instantly resend of received Blink transactions without requiring blockchain confirmations.</p>
<p>This document is intended to serve as a whitepaper underlying the concrete design for the implementation of Loki Blink with an expectation of inclusion in the 5.0.0 release.</p>
<h1 id="abstract">2 Abstract</h1>
<p>Blink takes advantage of Loki’s service node layer and <a href="LIP-3.md">checkpointing mechanism</a> to provide a strong assurance that a transaction will eventually reach the blockchain without risk of various adversarial attacks cancelling the transaction. It does this by using multiple quorums to validate a transfer and block conflicting transfers. This validation in combination with checkpointing and updated blockchain consensus rules help ensure that such validated transfers have a strong assurance of reaching the transaction memory pool and thus can be relied upon without requiring mining confirmations.</p>
<h1 id="blink-from-the-user-perspective">3 Blink from the user perspective</h1>
<h2 id="wallet-side">3.1 Wallet side</h2>
<p>From the user (wallet) side, initiating a Blink transfer is nearly identical to initiating a normal transfer, but with an extra flag (e.g. GUI checkbox, RPC parameter, CLI option) to say “Blink this transaction!”.</p>
<p>The fees of the blink transaction are higher as it involves considerably more work for the network: service nodes must validate the transaction, and all nodes must perform extra validation steps and require some temporary extra storage to store recent Blink transaction details.</p>
<p>For the user receiving a blink transaction, the wallet will see the received amount virtually instantly (that is, as soon as it is received by the lokid and the wallet refreshes with the daemon). Moreover these funds will be instantly spendable: unlike a regular transaction there will be no lock on the received funds before they can be spent again. The wallet user can immediately re-Blink the funds to someone else, or can send off a regular (non-Blink) transaction that spends the received Blink outputs instantly without needing to wait for the Blink transaction to be mined into a block.</p>
<h2 id="re-blinking">3.2 Re-blinking</h2>
<p>One of the goals of Blink is the ability to “re-Blink”: That is, we want a Blink transaction to be instantly available to the recipient indistinguishable from a (confirmed) non-Blink transaction from a usability perspective. For example, when Ava blinks 10 LOKI to Betty then that transaction is initially still in the mempool, but we don’t want Betty to have to worry about this technical detail: instead Betty can instantly Blink it to someone else, send a regular transaction, or use it to stake a new service node without waiting for even a single confirmation.</p>
<h2 id="fees">3.3 Fees</h2>
<p>The precise fee schedule is yet to be determined, but will be an additional amount on top of the current transaction fee, most likely calculated as a multiple of the transaction fee. Additionally, Blink transactions will not have a choice in transaction priority: since they are instantly spendable and guaranteed by the network, there would be little point in a user ever choosing anything higher than the minimum. Thus, for now, we mandate that Blink fees must always be submitted with a “normal” priority transaction fee (but this is tentative and may be adjust this before final Blink release).</p>
<p>The extra Blink fee doesn’t go to anyone: rather it gets permanently destroyed as part of the transaction. We considered two alternatives here:</p>
<ol type="1">
<li>Collecting fees and redistributing to SN over time. This would involve temporarily burning Blink fees, but keeping track of how much had been burned and continually reemitting them over a period of time as an extra rewards to Service Nodes. (For example: in every block, reduce the current pool of burned fees by 0.1% and reemit it to the service nodes that earn a reward in that block).</li>
<li>Just burning fees.</li>
</ol>
<p>Ultimately we decided on the second approach because:</p>
<ul>
<li>It is much simpler.</li>
<li>It is more predictable: SN rewards (for a stable number of service nodes) are known precisely.</li>
<li>In the end, the two approaches are effectively equivalent in terms of total emission.</li>
</ul>
<p>By equivalent I am assuming that we have a specific net emission target. For simplicity, I’ll just talk about the long-term 28 LOKI/block emissions, and, for the sake of example, assume that it is divided up so that service nodes get 20 LOKI/block of that;<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> the remaining 8 is foundation and miner coinbase rewards. What I mean by net emission is that if we have an average burning of 5 LOKI/block in Blink fees, then the net emission would 23 LOKI/block. But let’s suppose that 25 LOKI/block is our actual desired long-run emission target.</p>
<p>With method 1, we’re emitting 28 LOKI/block: burned Blink fees are reemitted over time and so, much like regular tx fees, there is no net gain or loss. To hit the 25 LOKI/block target we’d have to adjust the formula to reduce emissions to 25 LOKI/block.</p>
<p>With method 2, where we are burning 5 LOKI/block in fees, we are generate net emissions of 23 LOKI/block; to hit the same 25 LOKI/block target, then, we would need to <em>increase</em> coinbase emissions by 2 LOKI/block to hit our target.</p>
<p>Either way we arrive at the same place: net emissions of 25 LOKI/block through adjustment of the emission schedule. This was just an example, of course; our actual target could be 20 or 28 or 12 or whatever else. But with method 2, service nodes always know exactly what they will earn, while with method 1 there is more variability: large, sustained differences in the volume of Blink transactions will affect SN profitability, while in method 2 such differences will affect the overall coin emission but <em>not</em> the amount earned by a service node.</p>
<p>Thus, given the simpler approach and essential equivalence between the two approaches, we decided to pursue method 2. (Of course, like anything in Loki, we can always change the design later given compelling reasons to do so!)</p>
<h1 id="technical-design">4 Technical design</h1>
<h2 id="transaction-overview">4.1 Transaction overview</h2>
<p>In a nutshell (with most of the details covered later in this document): The wallet builds a transaction and sends it to the lokid to be blinked. The lokid then looks up the Blink quorum, connects to a few nodes in this quorum, sending the transaction to them to be signed. The quorum distributes the transaction within itself, and once enough approval signatures are collected, broadcasts the transaction and signature data to the service node’s p2p peers to disseminate it across the network. The lokid talking to the quorum then receives a confirmation message (with signatures) to relay to the wallet.</p>
<p>These steps are depicted in Figure 1. Note that the diagram has been significantly simplified for illustration to show only three service nodes per quorum rather than the actual ten.</p>
<figure>
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuNDAuMSAoMjAxNjEyMjUuMDMwNCkKIC0tPgo8IS0tIFRpdGxlOiBHIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI2NzZwdCIgaGVpZ2h0PSIzODdwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCA2NzYuMDAgMzg3LjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDM4MykiPgo8dGl0bGU+RzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0idHJhbnNwYXJlbnQiIHBvaW50cz0iLTQsNCAtNCwtMzgzIDY3MiwtMzgzIDY3Miw0IC00LDQiLz4KPGcgaWQ9ImNsdXN0MSIgY2xhc3M9ImNsdXN0ZXIiPgo8dGl0bGU+Y2x1c3Rlcl9xdW9ydW0xPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA2NDAwIiBwb2ludHM9IjgsLTEzOCA4LC0yMTMgMzMwLC0yMTMgMzMwLC0xMzggOCwtMTM4Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE2OSIgeT0iLTE5Ny44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDY0MDAiPkJsaW5rIHF1b3J1bSBRIGZvciBoZWlnaHQgaDwvdGV4dD4KPC9nPgo8ZyBpZD0iY2x1c3QyIiBjbGFzcz0iY2x1c3RlciI+Cjx0aXRsZT5jbHVzdGVyX3F1b3J1bTI8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iMzM4LC0xMzggMzM4LC0yMTMgNjYwLC0yMTMgNjYwLC0xMzggMzM4LC0xMzgiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDk5IiB5PSItMTk3LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwNjQwMCI+QmxpbmsgcXVvcnVtIFEmIzM5OyBmb3IgaGVpZ2h0IGg8L3RleHQ+CjwvZz4KPCEtLSBsb2tpZCAtLT4KPGcgaWQ9Im5vZGUxIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5sb2tpZDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNkM2QzZDMiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNzIuNSwtMjkyIDI5NS41LC0yOTIgMjk1LjUsLTI1NCAzNzIuNSwtMjU0IDM3Mi41LC0yOTIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzM0IiB5PSItMjc2LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bG9raWQ8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMzNCIgeT0iLTI2MS44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPkAgaGVpZ2h0IGg8L3RleHQ+CjwvZz4KPCEtLSBTTl8xIC0tPgo8ZyBpZD0ibm9kZTIiIGNsYXNzPSJub2RlIj4KPHRpdGxlPlNOXzE8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iMzIyLC0xODIgMjY4LC0xODIgMjY4LC0xNDYgMzIyLC0xNDYgMzIyLC0xODIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjk1IiB5PSItMTYwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iI2ZmZmZmZiI+U048L3RleHQ+CjwvZz4KPCEtLSBsb2tpZCYjNDU7Jmd0O1NOXzEgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+bG9raWQmIzQ1OyZndDtTTl8xPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBkPSJNMjk1LjI0MDgsLTI1NC43OTQ3QzI4OC4zMTQzLC0yNDkuNzE5MyAyODIuMDI5MywtMjQzLjQ5MTYgMjc4LC0yMzYgMjcwLjU4NTQsLTIyMi4yMTQyIDI3NC4wODM2LC0yMDUuMjM2IDI3OS43ODQ1LC0xOTEuMjI5NSIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjgyLjk5MTYsLTE5Mi42MzIyIDI4My45NzYxLC0xODIuMDgzMiAyNzYuNjI4LC0xODkuNzE1OCAyODIuOTkxNiwtMTkyLjYzMjIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjg1LjUiIHk9Ii0yMjQuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj7ikaE8L3RleHQ+CjwvZz4KPCEtLSBTTl8yMSAtLT4KPGcgaWQ9Im5vZGU1IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5TTl8yMTwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiMwMDY0MDAiIHN0cm9rZT0iIzAwNjQwMCIgcG9pbnRzPSI0MDAsLTE4MiAzNDYsLTE4MiAzNDYsLTE0NiA0MDAsLTE0NiA0MDAsLTE4MiIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNzMiIHk9Ii0xNjAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjZmZmZmZmIj5TTjwvdGV4dD4KPC9nPgo8IS0tIGxva2lkJiM0NTsmZ3Q7U05fMjEgLS0+CjxnIGlkPSJlZGdlMyIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+bG9raWQmIzQ1OyZndDtTTl8yMTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTM0MC44ODI2LC0yNTMuNzYzOUMzNDcuMDI3NywtMjM2LjU4OTIgMzU2LjEwMjUsLTIxMS4yMjY0IDM2My4wMzk3LC0xOTEuODM3NiIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzY2LjM3MjMsLTE5Mi45MTI3IDM2Ni40NDU4LC0xODIuMzE4MSAzNTkuNzgxNSwtMTkwLjU1NDQgMzY2LjM3MjMsLTE5Mi45MTI3Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM1OS41IiB5PSItMjI0LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+4pGhPC90ZXh0Pgo8L2c+CjwhLS0gd2FsbGV0IC0tPgo8ZyBpZD0ibm9kZTgiIGNsYXNzPSJub2RlIj4KPHRpdGxlPndhbGxldDwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNjEsLTM3OSAzMDcsLTM3OSAzMDcsLTM0MyAzNjEsLTM0MyAzNjEsLTM3OSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMzQiIHk9Ii0zNTcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj53YWxsZXQ8L3RleHQ+CjwvZz4KPCEtLSBsb2tpZCYjNDU7Jmd0O3dhbGxldCAtLT4KPGcgaWQ9ImVkZ2UzMCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+bG9raWQmIzQ1OyZndDt3YWxsZXQ8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0zNDQuNzQxMiwtMjkyLjA0NjZDMzQ4Ljk4NDQsLTMwMS43OTM2IDM1Mi4zNTMsLTMxMy45MTI0IDM1MCwtMzI1IDM0OS40MDEsLTMyNy44MjI2IDM0OC41NjQ5LC0zMzAuNjkyNSAzNDcuNTg2MiwtMzMzLjUxNzUiLz4KPHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM0NC4zMzA5LC0zMzIuMjMxNyAzNDMuODQ2LC0zNDIuODE1NCAzNTAuODI1MiwtMzM0Ljg0NDEgMzQ0LjMzMDksLTMzMi4yMzE3Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM1Ny41IiB5PSItMzEzLjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+4pGlPC90ZXh0Pgo8L2c+CjwhLS0gU05fMSYjNDU7Jmd0O2xva2lkIC0tPgo8ZyBpZD0iZWRnZTQiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzEmIzQ1OyZndDtsb2tpZDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTMwMS41NTQyLC0xODIuMzE4MUMzMDcuNTkyMywtMTk5LjE5MzkgMzE2LjY1MTIsLTIyNC41MTIzIDMyMy42NjM3LC0yNDQuMTExMiIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzIwLjQ1MywtMjQ1LjUyNzUgMzI3LjExNzQsLTI1My43NjM5IDMyNy4wNDM5LC0yNDMuMTY5MyAzMjAuNDUzLC0yNDUuNTI3NSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMjcuNSIgeT0iLTIyNC44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPuKRpDwvdGV4dD4KPC9nPgo8IS0tIFNOXzIgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+U05fMjwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiMwMDY0MDAiIHN0cm9rZT0iIzAwNjQwMCIgcG9pbnRzPSI3MCwtMTgyIDE2LC0xODIgMTYsLTE0NiA3MCwtMTQ2IDcwLC0xODIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDMiIHk9Ii0xNjAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjZmZmZmZmIj5TTjwvdGV4dD4KPC9nPgo8IS0tIFNOXzEmIzQ1OyZndDtTTl8yIC0tPgo8ZyBpZD0iZWRnZTciIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzE6cyYjNDU7Jmd0O1NOXzI8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwZmYiIGQ9Ik0yOTUsLTE0NkMyOTUsLTExMC44NTczIDE3NS45MTYyLC05Ni43OTY1IDE0MiwtMTA2IDExNy40Mzc0LC0xMTIuNjY1MyA5Mi43MzMsLTEyNy4xMjQ0IDc0LjE0NjUsLTEzOS45Mzc2Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwZmYiIHN0cm9rZT0iIzAwMDBmZiIgcG9pbnRzPSI3MS45Mjc5LC0xMzcuMjIwNCA2NS44MDEsLTE0NS44NjQgNzUuOTgwOSwtMTQyLjkyNzcgNzEuOTI3OSwtMTM3LjIyMDQiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTcyLjYyMTMiIHk9Ii0xMDcuMjIyIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwZmYiPuKRojwvdGV4dD4KPC9nPgo8IS0tIFNOXzEmIzQ1OyZndDtTTl8yIC0tPgo8ZyBpZD0iZWRnZTEwIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5TTl8xOm4mIzQ1OyZndDtTTl8yOm48L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNkYzE0M2MiIGQ9Ik0yOTQuMTgyLC0xOTIuMDkzNUMyODcuNDcwNiwtMjMwLjI1MDMgMjQwLjYwMiwtMjIyLjU5MjcgMTk2LC0yMzMuNSAxMjkuODQ0MSwtMjQ5LjY3ODIgNTEuNDI1NiwtMjUzLjM4NzcgNDMuNjMxOCwtMTkyLjM1ODYiLz4KPHBvbHlnb24gZmlsbD0iI2RjMTQzYyIgc3Ryb2tlPSIjZGMxNDNjIiBwb2ludHM9IjI5Ny42ODA3LC0xOTIuMjUwMSAyOTUsLTE4MiAyOTAuNzAzNiwtMTkxLjY4NDYgMjk3LjY4MDcsLTE5Mi4yNTAxIi8+Cjxwb2x5Z29uIGZpbGw9IiNkYzE0M2MiIHN0cm9rZT0iI2RjMTQzYyIgcG9pbnRzPSI0Ny4xMDI0LC0xOTEuNzY4NCA0MywtMTgyIDQwLjExNTMsLTE5Mi4xOTQ2IDQ3LjEwMjQsLTE5MS43Njg0Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE3Mi44MDk3IiB5PSItMjQwLjgzODUiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iI2RjMTQzYyI+4pGjPC90ZXh0Pgo8L2c+CjwhLS0gU05fMyAtLT4KPGcgaWQ9Im5vZGU0IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5TTl8zPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iIzAwNjQwMCIgc3Ryb2tlPSIjMDA2NDAwIiBwb2ludHM9IjE5NiwtMTgyIDE0MiwtMTgyIDE0MiwtMTQ2IDE5NiwtMTQ2IDE5NiwtMTgyIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE2OSIgeT0iLTE2MC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiNmZmZmZmYiPlNOPC90ZXh0Pgo8L2c+CjwhLS0gU05fMSYjNDU7Jmd0O1NOXzMgLS0+CjxnIGlkPSJlZGdlNiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMTpzJiM0NTsmZ3Q7U05fMzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBmZiIgZD0iTTI5NSwtMTQ2QzI5NSwtMTA5LjQzNDUgMjQyLjM1NDIsLTEyNy42NjEyIDIwNS4xMjI0LC0xNDUuMTIzNCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMGZmIiBzdHJva2U9IiMwMDAwZmYiIHBvaW50cz0iMjAzLjUxNDEsLTE0Mi4wMTMzIDE5Ni4wMzAyLC0xNDkuNTEyNyAyMDYuNTU3MywtMTQ4LjMxNzEgMjAzLjUxNDEsLTE0Mi4wMTMzIi8+CjwvZz4KPCEtLSBTTl8xJiM0NTsmZ3Q7U05fMyAtLT4KPGcgaWQ9ImVkZ2UxMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMSYjNDU7Jmd0O1NOXzM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNkYzE0M2MiIGQ9Ik0yNjcuNTc5OCwtMTY0QzI0OS41OTc5LC0xNjQgMjI1Ljg2MjMsLTE2NCAyMDYuMTg3NywtMTY0Ii8+Cjxwb2x5Z29uIGZpbGw9IiNkYzE0M2MiIHN0cm9rZT0iI2RjMTQzYyIgcG9pbnRzPSIyMDYuMDMwMiwtMTYwLjUwMDEgMTk2LjAzMDIsLTE2NCAyMDYuMDMwMSwtMTY3LjUwMDEgMjA2LjAzMDIsLTE2MC41MDAxIi8+CjwvZz4KPCEtLSBwZWVycyAtLT4KPGcgaWQ9Im5vZGU5IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5wZWVyczwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNkM2QzZDMiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzMzEuNDEwMiwtLjA0OTMgMzM2LjMxNjQsLS4xNDc5IDM0MS4xNzE4LC0uMjk1MyAzNDUuOTU2NywtLjQ5MTMgMzUwLjY1MTYsLS43MzUzIDM1NS4yMzc4LC0xLjAyNjYgMzU5LjY5NzEsLTEuMzY0NSAzNjQuMDEyMiwtMS43NDc5IDM2OC4xNjY2LC0yLjE3NTkgMzcyLjE0NSwtMi42NDcyIDM3NS45MzMsLTMuMTYwNiAzNzkuNTE3NSwtMy43MTQ3IDM4Mi44ODY0LC00LjMwOCAzODYuMDI5MiwtNC45Mzg4IDM4OC45MzY1LC01LjYwNTQgMzkxLjYwMDQsLTYuMzA1OSAzOTQuMDE0MiwtNy4wMzg1IDM5Ni4xNzI3LC03LjgwMTIgMzk4LjA3MjIsLTguNTkxOCAzOTkuNzEwMywtOS40MDgyIDQwMS4wODU5LC0xMC4yNDgxIDQwMi4xOTkyLC0xMS4xMDkzIDQwMy4wNTE4LC0xMS45ODk0IDQwMy42NDY1LC0xMi44ODYgNDAzLjk4NzEsLTEzLjc5NjUgNDA0LjA3ODgsLTE0LjcxODYgNDAzLjkyNzUsLTE1LjY0OTcgNDAzLjU0MDEsLTE2LjU4NzMgNDAyLjkyNDQsLTE3LjUyODcgNDAyLjA4OSwtMTguNDcxMyA0MDEuMDQzLC0xOS40MTI3IDM5OS43OTYxLC0yMC4zNTAzIDM5OC4zNTg0LC0yMS4yODE0IDM5Ni43NDA0LC0yMi4yMDM1IDM5NC45NTI3LC0yMy4xMTQgMzkzLjAwNjMsLTI0LjAxMDYgMzkwLjkxMjEsLTI0Ljg5MDcgMzg4LjY4MDgsLTI1Ljc1MTkgMzg2LjMyMzEsLTI2LjU5MTggMzgzLjg0OTYsLTI3LjQwODIgMzgxLjI3MDUsLTI4LjE5ODggMzc4LjU5NTcsLTI4Ljk2MTUgMzc1LjgzNDUsLTI5LjY5NDEgMzcyLjk5NiwtMzAuMzk0NiAzNzAuMDg4NywtMzEuMDYxMiAzNjcuMTIwNiwtMzEuNjkyIDM2NC4wOTksLTMyLjI4NTMgMzYxLjAzMDksLTMyLjgzOTQgMzU3LjkyMjQsLTMzLjM1MjggMzU0Ljc3OTQsLTMzLjgyNDEgMzUxLjYwNzEsLTM0LjI1MjEgMzQ4LjQxLC0zNC42MzU1IDM0NS4xOTIzLC0zNC45NzM0IDM0MS45NTc5LC0zNS4yNjQ3IDMzOC43MDk5LC0zNS41MDg3IDMzNS40NTE0LC0zNS43MDQ3IDMzMi4xODUsLTM1Ljg1MjEgMzI4LjkxMzEsLTM1Ljk1MDcgMzI1LjYzODEsLTM2IDMyMi4zNjE5LC0zNiAzMTkuMDg2OSwtMzUuOTUwNyAzMTUuODE1LC0zNS44NTIxIDMxMi41NDg2LC0zNS43MDQ3IDMwOS4yOTAxLC0zNS41MDg3IDMwNi4wNDIxLC0zNS4yNjQ3IDMwMi44MDc3LC0zNC45NzM0IDI5OS41OSwtMzQuNjM1NSAyOTYuMzkyOSwtMzQuMjUyMSAyOTMuMjIwNiwtMzMuODI0MSAyOTAuMDc3NiwtMzMuMzUyOCAyODYuOTY5MSwtMzIuODM5NCAyODMuOTAxLC0zMi4yODUzIDI4MC44Nzk0LC0zMS42OTIgMjc3LjkxMTMsLTMxLjA2MTIgMjc1LjAwNCwtMzAuMzk0NiAyNzIuMTY1NSwtMjkuNjk0MSAyNjkuNDA0MywtMjguOTYxNSAyNjYuNzI5NSwtMjguMTk4OCAyNjQuMTUwNCwtMjcuNDA4MiAyNjEuNjc2OSwtMjYuNTkxOCAyNTkuMzE5MiwtMjUuNzUxOSAyNTcuMDg3OSwtMjQuODkwNyAyNTQuOTkzNywtMjQuMDEwNiAyNTMuMDQ3MywtMjMuMTE0IDI1MS4yNTk2LC0yMi4yMDM1IDI0OS42NDE2LC0yMS4yODE0IDI0OC4yMDM5LC0yMC4zNTAzIDI0Ni45NTcsLTE5LjQxMjcgMjQ1LjkxMSwtMTguNDcxMyAyNDUuMDc1NiwtMTcuNTI4NyAyNDQuNDU5OSwtMTYuNTg3MyAyNDQuMDcyNSwtMTUuNjQ5NyAyNDMuOTIxMiwtMTQuNzE4NiAyNDQuMDEyOSwtMTMuNzk2NSAyNDQuMzUzNSwtMTIuODg2IDI0NC45NDgyLC0xMS45ODk0IDI0NS44MDA4LC0xMS4xMDkzIDI0Ni45MTQxLC0xMC4yNDgxIDI0OC4yODk3LC05LjQwODIgMjQ5LjkyNzgsLTguNTkxOCAyNTEuODI3MywtNy44MDEyIDI1My45ODU4LC03LjAzODUgMjU2LjM5OTYsLTYuMzA1OSAyNTkuMDYzNSwtNS42MDU0IDI2MS45NzA4LC00LjkzODggMjY1LjExMzYsLTQuMzA4IDI2OC40ODI1LC0zLjcxNDcgMjcyLjA2NywtMy4xNjA2IDI3NS44NTUsLTIuNjQ3MiAyNzkuODMzNCwtMi4xNzU5IDI4My45ODc4LC0xLjc0NzkgMjg4LjMwMjksLTEuMzY0NSAyOTIuNzYyMiwtMS4wMjY2IDI5Ny4zNDg0LC0uNzM1MyAzMDIuMDQzMywtLjQ5MTMgMzA2LjgyODIsLS4yOTUzIDMxMS42ODM2LC0uMTQ3OSAzMTYuNTg5OCwtLjA0OTMgMzIxLjUyNjUsMCAzMjYuNDczNSwwIDMzMS40MTAyLC0uMDQ5MyIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMjQiIHk9Ii0xNC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmxva2lkIHAycCBuZXR3b3JrPC90ZXh0Pgo8L2c+CjwhLS0gU05fMSYjNDU7Jmd0O3BlZXJzIC0tPgo8ZyBpZD0iZWRnZTI0IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5TTl8xJiM0NTsmZ3Q7cGVlcnM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0yODEuMjU5NCwtMTQ1Ljg1MjRDMjY4LjkzOCwtMTI3LjIyMDggMjU0LjMxODUsLTk3LjU2MDEgMjY1LC03MyAyNzAuMzc2NCwtNjAuNjM4IDI4MC4wNTIyLC00OS43OTYgMjkwLjAzMzYsLTQxLjA3ODciLz4KPHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI5Mi40OTMyLC00My41ODkxIDI5OC4wMjc4LC0zNC41NTQ4IDI4OC4wNjczLC0zOC4xNjU4IDI5Mi40OTMyLC00My41ODkxIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI0Mi4wMTU4IiB5PSItNzYuNzYzOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj7ikaQgJiMxNjA7JiMxNjA7JiMxNjA7JiMxNjA7JiMxNjA7JiMxNjA7PC90ZXh0Pgo8L2c+CjwhLS0gcGVlcnNfaGFjayAtLT4KPCEtLSBTTl8xJiM0NTsmZ3Q7cGVlcnNfaGFjayAtLT4KPCEtLSBTTl8yJiM0NTsmZ3Q7U05fMyAtLT4KPGcgaWQ9ImVkZ2UxMyIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMjplJiM0NTsmZ3Q7U05fMzp3PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGMxNDNjIiBkPSJNNzAsLTE2NEM5OC4zNzUsLTE2NCAxMDcuODc5NSwtMTY0IDEzMS45NzkyLC0xNjQiLz4KPHBvbHlnb24gZmlsbD0iI2RjMTQzYyIgc3Ryb2tlPSIjZGMxNDNjIiBwb2ludHM9IjEzMiwtMTY3LjUwMDEgMTQyLC0xNjQgMTMyLC0xNjAuNTAwMSAxMzIsLTE2Ny41MDAxIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9Ijk4LjQyNjgiIHk9Ii0xNjcuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjZGMxNDNjIj7ikaM8L3RleHQ+CjwvZz4KPCEtLSBTTl8yJiM0NTsmZ3Q7cGVlcnMgLS0+CjxnIGlkPSJlZGdlMjUiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzImIzQ1OyZndDtwZWVyczwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTcwLjI0MjgsLTE0OS4wNzY1QzEwMy43MDAyLC0xMzAuODI3NiAxNjIuMjYxNSwtOTkuMTQyMiAyMTMsLTczIDIzNS44NzkzLC02MS4yMTE4IDI2MS42MjQzLC00OC40MjU5IDI4Mi41NTYxLC0zOC4xNTExIi8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyODQuMzY2MywtNDEuMTYxNyAyOTEuODA3MSwtMzMuNjE5NSAyODEuMjg3LC0zNC44NzU0IDI4NC4zNjYzLC00MS4xNjE3Ii8+CjwvZz4KPCEtLSBTTl8zJiM0NTsmZ3Q7U05fMSAtLT4KPGcgaWQ9ImVkZ2UxMSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMzplJiM0NTsmZ3Q7U05fMTp3PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGMxNDNjIiBkPSJNMTk2LC0xNjRDMjI0LjM3NSwtMTY0IDIzMy44Nzk1LC0xNjQgMjU3Ljk3OTIsLTE2NCIvPgo8cG9seWdvbiBmaWxsPSIjZGMxNDNjIiBzdHJva2U9IiNkYzE0M2MiIHBvaW50cz0iMjU4LC0xNjcuNTAwMSAyNjgsLTE2NCAyNTgsLTE2MC41MDAxIDI1OCwtMTY3LjUwMDEiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjI0LjQyNjgiIHk9Ii0xNjcuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjZGMxNDNjIj7ikaM8L3RleHQ+CjwvZz4KPCEtLSBTTl8zJiM0NTsmZ3Q7U05fMiAtLT4KPGcgaWQ9ImVkZ2UxNCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMyYjNDU7Jmd0O1NOXzI8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNkYzE0M2MiIGQ9Ik0xNDEuNTc5OCwtMTY0QzEyMy41OTc5LC0xNjQgOTkuODYyMywtMTY0IDgwLjE4NzcsLTE2NCIvPgo8cG9seWdvbiBmaWxsPSIjZGMxNDNjIiBzdHJva2U9IiNkYzE0M2MiIHBvaW50cz0iODAuMDMwMiwtMTYwLjUwMDEgNzAuMDMwMiwtMTY0IDgwLjAzMDEsLTE2Ny41MDAxIDgwLjAzMDIsLTE2MC41MDAxIi8+CjwvZz4KPCEtLSBTTl8zJiM0NTsmZ3Q7cGVlcnMgLS0+CjxnIGlkPSJlZGdlMjYiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzMmIzQ1OyZndDtwZWVyczwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTE4My45ODY3LC0xNDUuNzM3NEMyMDMuMTQ1NywtMTIyLjk0NzQgMjM3LjkzLC04My4zOTY3IDI3MiwtNTQgMjc3LjM2MjEsLTQ5LjM3MzQgMjgzLjMyMzIsLTQ0Ljc5MjkgMjg5LjI0MSwtNDAuNTI4OSIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjkxLjYxNjMsLTQzLjEzODggMjk3LjgwNTYsLTM0LjUzOTcgMjg3LjYwNDgsLTM3LjQwMjMgMjkxLjYxNjMsLTQzLjEzODgiLz4KPC9nPgo8IS0tIFNOXzIxJiM0NTsmZ3Q7bG9raWQgLS0+CjxnIGlkPSJlZGdlNSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMjEmIzQ1OyZndDtsb2tpZDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTM3NS4zNTM5LC0xODIuMjQwN0MzNzYuNTIxNSwtMTk3LjI4NyAzNzYuMzc2NywtMjE4Ljg2NjggMzY5LC0yMzYgMzY3LjUxMzksLTIzOS40NTE2IDM2NS41NTY2LC0yNDIuNzc3IDM2My4zMjU1LC0yNDUuOTIyOCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzYwLjUxNjEsLTI0My44MyAzNTYuOTE1NywtMjUzLjc5NDMgMzY1Ljk0NDEsLTI0OC4yNSAzNjAuNTE2MSwtMjQzLjgzIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM4MC41IiB5PSItMjI0LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+4pGkPC90ZXh0Pgo8L2c+CjwhLS0gU05fMjIgLS0+CjxnIGlkPSJub2RlNiIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+U05fMjI8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iNTI2LC0xODIgNDcyLC0xODIgNDcyLC0xNDYgNTI2LC0xNDYgNTI2LC0xODIiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDk5IiB5PSItMTYwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iI2ZmZmZmZiI+U048L3RleHQ+CjwvZz4KPCEtLSBTTl8yMSYjNDU7Jmd0O1NOXzIyIC0tPgo8ZyBpZD0iZWRnZTgiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzIxOnMmIzQ1OyZndDtTTl8yMjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBmZiIgZD0iTTM3MywtMTQ2QzM3MywtMTA5LjQzNDUgNDI1LjY0NTgsLTEyNy42NjEyIDQ2Mi44Nzc2LC0xNDUuMTIzNCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMGZmIiBzdHJva2U9IiMwMDAwZmYiIHBvaW50cz0iNDYxLjQ0MjcsLTE0OC4zMTcxIDQ3MS45Njk4LC0xNDkuNTEyNyA0NjQuNDg1OSwtMTQyLjAxMzMgNDYxLjQ0MjcsLTE0OC4zMTcxIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQxMy44OTY4IiB5PSItMTM0Ljc3NTkiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDBmZiI+4pGiICYjMTYwOyYjMTYwOzwvdGV4dD4KPC9nPgo8IS0tIFNOXzIxJiM0NTsmZ3Q7U05fMjIgLS0+CjxnIGlkPSJlZGdlMTUiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzIxOmUmIzQ1OyZndDtTTl8yMjp3PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZGMxNDNjIiBkPSJNNDAwLC0xNjRDNDI4LjM3NSwtMTY0IDQzNy44Nzk1LC0xNjQgNDYxLjk3OTIsLTE2NCIvPgo8cG9seWdvbiBmaWxsPSIjZGMxNDNjIiBzdHJva2U9IiNkYzE0M2MiIHBvaW50cz0iNDYyLC0xNjcuNTAwMSA0NzIsLTE2NCA0NjIsLTE2MC41MDAxIDQ2MiwtMTY3LjUwMDEiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDI4LjQyNjgiIHk9Ii0xNjcuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjZGMxNDNjIj7ikaM8L3RleHQ+CjwvZz4KPCEtLSBTTl8yMyAtLT4KPGcgaWQ9Im5vZGU3IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT5TTl8yMzwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiMwMDY0MDAiIHN0cm9rZT0iIzAwNjQwMCIgcG9pbnRzPSI2NTIsLTE4MiA1OTgsLTE4MiA1OTgsLTE0NiA2NTIsLTE0NiA2NTIsLTE4MiIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2MjUiIHk9Ii0xNjAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjZmZmZmZmIj5TTjwvdGV4dD4KPC9nPgo8IS0tIFNOXzIxJiM0NTsmZ3Q7U05fMjMgLS0+CjxnIGlkPSJlZGdlOSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMjE6cyYjNDU7Jmd0O1NOXzIzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMGZmIiBkPSJNMzczLC0xNDZDMzczLC0xMTAuODU3MyA0OTIuMDgzOCwtOTYuNzk2NSA1MjYsLTEwNiA1NTAuNTYyNiwtMTEyLjY2NTMgNTc1LjI2NywtMTI3LjEyNDQgNTkzLjg1MzUsLTEzOS45Mzc2Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwZmYiIHN0cm9rZT0iIzAwMDBmZiIgcG9pbnRzPSI1OTIuMDE5MSwtMTQyLjkyNzcgNjAyLjE5OSwtMTQ1Ljg2NCA1OTYuMDcyMSwtMTM3LjIyMDQgNTkyLjAxOTEsLTE0Mi45Mjc3Ii8+CjwvZz4KPCEtLSBTTl8yMSYjNDU7Jmd0O1NOXzIzIC0tPgo8ZyBpZD0iZWRnZTE3IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5TTl8yMTpuJiM0NTsmZ3Q7U05fMjM6bjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RjMTQzYyIgZD0iTTM3My42MzE4LC0xOTIuMzU4NkMzODEuNDI1NiwtMjUzLjM4NzcgNDU5Ljg0NDEsLTI0OS42NzgyIDUyNiwtMjMzLjUgNTcwLjYwMiwtMjIyLjU5MjcgNjE3LjQ3MDYsLTIzMC4yNTAzIDYyNC4xODIsLTE5Mi4wOTM1Ii8+Cjxwb2x5Z29uIGZpbGw9IiNkYzE0M2MiIHN0cm9rZT0iI2RjMTQzYyIgcG9pbnRzPSIzNzcuMTAyNCwtMTkxLjc2ODQgMzczLC0xODIgMzcwLjExNTMsLTE5Mi4xOTQ2IDM3Ny4xMDI0LC0xOTEuNzY4NCIvPgo8cG9seWdvbiBmaWxsPSIjZGMxNDNjIiBzdHJva2U9IiNkYzE0M2MiIHBvaW50cz0iNjI3LjY4MDcsLTE5Mi4yNTAxIDYyNSwtMTgyIDYyMC43MDM2LC0xOTEuNjg0NiA2MjcuNjgwNywtMTkyLjI1MDEiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTE4LjUxNjMiIHk9Ii0yMzcuMjk2IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiNkYzE0M2MiPuKRozwvdGV4dD4KPC9nPgo8IS0tIFNOXzIxJiM0NTsmZ3Q7cGVlcnMgLS0+CjxnIGlkPSJlZGdlMjciIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzIxJiM0NTsmZ3Q7cGVlcnM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik0zODAuMjA4MiwtMTQ1Ljc1MjlDMzg2LjUzNjcsLTEyNi43ODA4IDM5My4yNjg5LC05Ni42MTE0IDM4MywtNzMgMzc3LjYyMzYsLTYwLjYzOCAzNjcuOTQ3OCwtNDkuNzk2IDM1Ny45NjY0LC00MS4wNzg3Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNTkuOTMyNywtMzguMTY1OCAzNDkuOTcyMiwtMzQuNTU0OCAzNTUuNTA2OCwtNDMuNTg5MSAzNTkuOTMyNywtMzguMTY1OCIvPgo8L2c+CjwhLS0gU05fMjEmIzQ1OyZndDtwZWVyc19oYWNrIC0tPgo8IS0tIFNOXzIyJiM0NTsmZ3Q7U05fMjEgLS0+CjxnIGlkPSJlZGdlMTYiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzIyJiM0NTsmZ3Q7U05fMjE8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNkYzE0M2MiIGQ9Ik00NzEuNTc5OCwtMTY0QzQ1My41OTc5LC0xNjQgNDI5Ljg2MjMsLTE2NCA0MTAuMTg3NywtMTY0Ii8+Cjxwb2x5Z29uIGZpbGw9IiNkYzE0M2MiIHN0cm9rZT0iI2RjMTQzYyIgcG9pbnRzPSI0MTAuMDMwMiwtMTYwLjUwMDEgNDAwLjAzMDIsLTE2NCA0MTAuMDMwMSwtMTY3LjUwMDEgNDEwLjAzMDIsLTE2MC41MDAxIi8+CjwvZz4KPCEtLSBTTl8yMiYjNDU7Jmd0O1NOXzIzIC0tPgo8ZyBpZD0iZWRnZTE4IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5TTl8yMjplJiM0NTsmZ3Q7U05fMjM6dzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RjMTQzYyIgZD0iTTUyNiwtMTY0QzU1NC4zNzUsLTE2NCA1NjMuODc5NSwtMTY0IDU4Ny45NzkyLC0xNjQiLz4KPHBvbHlnb24gZmlsbD0iI2RjMTQzYyIgc3Ryb2tlPSIjZGMxNDNjIiBwb2ludHM9IjU4OCwtMTY3LjUwMDEgNTk4LC0xNjQgNTg4LC0xNjAuNTAwMSA1ODgsLTE2Ny41MDAxIi8+CjwvZz4KPCEtLSBTTl8yMiYjNDU7Jmd0O3BlZXJzIC0tPgo8ZyBpZD0iZWRnZTI4IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5TTl8yMiYjNDU7Jmd0O3BlZXJzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBkPSJNNDgyLjc2MTksLTE0NS44OTM3QzQ2MS42MTY0LC0xMjIuOTE1MSA0MjIuODY3NywtODIuODA4MSAzODUsLTU0IDM3OC4xNzY3LC00OC44MDkyIDM3MC41NDU3LC00My43NzU2IDM2My4wNTI5LC0zOS4xOTg2Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNjQuNzYzNywtMzYuMTQ0IDM1NC4zNzcyLC0zNC4wNTMzIDM2MS4xOTI5LC00Mi4xNjQ4IDM2NC43NjM3LC0zNi4xNDQiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDE0LjgzNDYiIHk9Ii04OS4xOTE5IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPuKRpDwvdGV4dD4KPC9nPgo8IS0tIFNOXzIzJiM0NTsmZ3Q7U05fMjIgLS0+CjxnIGlkPSJlZGdlMTkiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPlNOXzIzJiM0NTsmZ3Q7U05fMjI8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNkYzE0M2MiIGQ9Ik01OTcuNTc5OCwtMTY0QzU3OS41OTc5LC0xNjQgNTU1Ljg2MjMsLTE2NCA1MzYuMTg3NywtMTY0Ii8+Cjxwb2x5Z29uIGZpbGw9IiNkYzE0M2MiIHN0cm9rZT0iI2RjMTQzYyIgcG9pbnRzPSI1MzYuMDMwMiwtMTYwLjUwMDEgNTI2LjAzMDIsLTE2NCA1MzYuMDMwMSwtMTY3LjUwMDEgNTM2LjAzMDIsLTE2MC41MDAxIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjU1NC41MTkzIiB5PSItMTY3LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iI2RjMTQzYyI+4pGjPC90ZXh0Pgo8L2c+CjwhLS0gU05fMjMmIzQ1OyZndDtwZWVycyAtLT4KPGcgaWQ9ImVkZ2UyOSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+U05fMjMmIzQ1OyZndDtwZWVyczwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTU5Ny45NTg5LC0xNTAuNDE3QzU2Mi4xNTc4LC0xMzIuNDgxOCA0OTcuMDE0MSwtMTAwLjAxMzcgNDQxLC03MyA0MTYuNDExNSwtNjEuMTQxOCAzODguNzc3OSwtNDguMTM2NyAzNjYuNTQyNywtMzcuNzUxMSIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzY3LjkxMDUsLTM0LjUyNzIgMzU3LjM2ODQsLTMzLjQ3MTUgMzY0Ljk1MTMsLTQwLjg3MDkgMzY3LjkxMDUsLTM0LjUyNzIiLz4KPC9nPgo8IS0tIHdhbGxldCYjNDU7Jmd0O2xva2lkIC0tPgo8ZyBpZD0iZWRnZTEiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPndhbGxldCYjNDU7Jmd0O2xva2lkPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBkPSJNMzM0LC0zNDIuNzY2M0MzMzQsLTMzMS4wODc1IDMzNCwtMzE1LjY2OTIgMzM0LC0zMDIuMjk3OCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzM3LjUwMDEsLTMwMi4xMjM1IDMzNCwtMjkyLjEyMzUgMzMwLjUwMDEsLTMwMi4xMjM1IDMzNy41MDAxLC0zMDIuMTIzNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNDEuNSIgeT0iLTMxMy44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPuKRoDwvdGV4dD4KPC9nPgo8IS0tIHBlZXJzX2hhY2smIzQ1OyZndDtwZWVycyAtLT4KPCEtLSBwZWVyc19oYWNrJiM0NTsmZ3Q7cGVlcnMgLS0+CjwvZz4KPC9zdmc+Cg==" alt="Figure 1: Blink transaction flow" /><figcaption>Figure 1: Blink transaction flow</figcaption>
</figure>
<p>In more detail:</p>
<ol type="1">
<li><p>The wallet constructs a transaction. This transaction is <em>almost</em> like a regular transaction except that it leaves enough inputs unspent to cover both the required mining transaction fee and the Blink fee. This transaction gets send to the wallet’s lokid for handling.</p></li>
<li><p>lokid looks at the transaction, does some preliminary checks (as it would with any transaction) and additional checks related to the Blink transaction (such as having the correct transaction priority and blink fee). These checks are not strictly required for network security—they will also be done by the service nodes—but can give an immediate failure response to the wallet if the node reasonably believes the transaction will fail. Assuming the preliminary checks pass, the node then uses the current blockchain height to determine the transaction’s signing height, <em>h</em>. This <em>h</em> value then determines two current Blink quorums, <em>Q</em> and <em>Q’</em> (more details on quorum construction are in the <a href="#quorum-selection">Quorum selection</a> section below). The lokid handling the transaction connects directly to 2 nodes selected randomly from each quorum and sends the transaction (plus other required details such as <em>h</em>) to be signed.</p></li>
<li><p>The receiving quorum nodes directly contacted by the initiating lokid forward the transaction details to the other quorum nodes for verification.</p></li>
<li><p>Each service node in the two quorums performs checks on the validity of the transaction, such as ensuring that it isn’t already spent, that it isn’t already in the mempool, that miner and Blink fees are correctly specified, and that the requested signature height, <em>h</em>, <em>h</em> is approximately current (within 2 blocks of what the service node believes is the current height), and that the key images have not been already locked out by a previous, different Blink transaction signing. Assuming everything checks out, the service node records the transaction’s key images locally (to lock them out from being signed again by this service node), signs the transaction hash with the service node private key, and sends the signature to the other quorum members.</p></li>
<li><p>As each of the quorum members receives a supermajority of valid signatures (i.e. 7 in total) from <em>both</em> quorums it immediately sends out the transaction and signature details to its blockchain peers via its p2p network. If the quorum node in question is one of the nodes that was directly contacted by lokid, it additionally communicates the success back to the caller.</p>
<p>These signed mempool transactions, however, are much stronger than a regular mempool transaction in that they can trigger a reorg or lead to rejected blocks: more details on this are covered below.</p>
<p>In the case of detectable failure (for example, from a detected double-spend confirmed by a sufficient number of service nodes), a failure message is returned to the caller. If a failure is caused by too many quorum nodes timing out the caller is expected to itself timeout after an appropriate amount of time waiting for a response.</p></li>
<li><p>The initiating lokid waits for success, failure, or timeout from the quorum nodes it contacted, and once received (or timed out), sends this information back to the wallet.</p></li>
</ol>
<h2 id="quorum-selection">4.2 Quorum selection</h2>
<p>Quorum selection works by using the requested signing height <em>h</em> to deterministically select the two relevant quorums, <em>Q</em> and <em>Q’</em>. A quorum <em>Q</em> is determined by the 5-block range within which <em>h</em> falls, and <em>Q’</em> is the quorum for the immediately subsequent 5-block range. For example, any <em>h</em> value in 1000–1004 will yield the same <em>Q</em> and <em>Q’</em> quorums, and this <em>Q’</em> will be exactly the same quorum as the <em>Q</em> quorum for an <em>h</em> value in the 1005–1009 signing height range. In other words, <em>Q’(h=1003)</em> and <em>Q(h=1006)</em> are the <strong>same quorum</strong>.</p>
<p>All service nodes in <em>Q</em> and <em>Q’</em> refuse to sign a transaction with a requested signing height <em>h</em> that is more than 2 blocks behind or ahead of the service node’s current blockchain height: this is to allow some tolerance for Blink transactions to succeed even if new blocks are propagating through the network during the Blink transaction signing process. This ±2 tolerance is designed to make the user experience better: using a node that is slightly out of sync<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> will still work fine rather than returning a Blink failure. It also avoids potential Blink failures on the part of quorum nodes: if a block happens to arrive during the actual signing process such that half of the quorum see the new block and half see the old block the quorum will still sign without issue. On the other hand the ±2 limit on the signing height also prevents abuse: the larger the allowed range, the more choices a malicious actor would have to pick and choose a “friendly” quorum.</p>
<p>The quorum sample itself needs to be effectively immutable, and so we propose a deterministic random sampling using a MT19937-64 random number generator seeded with the block hash 35 blocks before the first valid quorum height, <em>h₀</em>. Thus quorum <em>Q</em> for height 1002 is determined by block 965 (35 blocks before the first signing height of the quorum, <em>h₀</em>=1000), and quorum <em>Q’</em> is determined by block 970 (35 blocks before the first height of the second quorum, <em>h’₀</em>=1005). Moreover the sampling algorithm excludes any service nodes that are scheduled to expire before block <em>h₀</em>+10.</p>
<p>For validation of a Blink transaction we require a supermajority of signatures from <em>both</em> quorums. The point here of using the two quorums is to prevent a timing conflict where, if we had just one quorum per block (or range of blocks), then one Blink transaction could be signed by quorum <em>Q₁</em> and another transaction spending the same keys could be signed by quorum <em>Q₂</em> <strong>before</strong> the first transaction is broadcast to the network. By using two overlapping quorums we end up with the key images in question being locked both in the current quorum but also in the following quorum (which could come as early as the next block). Even if the next Blink transaction switches to a new quorum, the overlap ensures that it simply switching to a quorum that has already locked any key images of Blink transactions submitted in the last few blocks.</p>
<h3 id="overlapping-quorums-rationale">4.2.1 Overlapping quorums rationale</h3>
<p>There are three reasons for using these two overlapping quorums. First, we want the quorum signature process to “reach” a few blocks into the future (5–9 blocks ahead with 5-block quorums) to give enough time for the quorum signatures to disseminate across the network. While 5 blocks is more than would be typically required, there are some edge cases discussed in detail below that can lower this future block interval to just 2 blocks.</p>
<p>Second, Blink processing is expected to require a substantial number of connections between service nodes; with 5-block quorums we can at least reduce the frequency with which connections need to be established as service nodes will keep their connections open for the duration of the quorum.</p>
<p>Third, using two quorums offers considerable higher security than one quorum of twice the size for two reasons. First, each quorum is essentially a new random draw of service nodes; that means the more quorums you have over a given period of time the more random draws you do, and with more draws you get more “chances” to pick a compromised sample. Second, two <em>consecutive</em> supermajorities of quorums of half the size is considerably more secure than one supermajority of a quorum twice the size.</p>
<p>Some numbers can help demonstrate this: suppose the network has 1000 service nodes, and a single malicious actor is in control of 25% of those service nodes. Under alternative A, we require the majority of a single quorum of 20 service nodes, and require a 70% of the service nodes’ signatures. Under alternative B, we require two quorums of 10 service nodes each, again requiring 70% signatures from each quorum.</p>
<p>Under scenario A in any given quorum the actor has a probability of 0.00000381 of having the required 70% majority. Under scenario B, the actor has a probability of 0.000000173: that is, under scenario A, the actor is about 22 times more likely to obtain control of any random quorum than any random quorum pair. Or to put it into context: in a one year span, there’s about an 18% chance that this bad actor would gain quorum control for at least a single quorum under scenario A, and about a 0.9% chance that he would under scenario B. As for quorum length, if quorums lasted for one block instead of five there would be a 4.4% chance of this 25% operator having a quorum supermajority at least once under the overlapping quorum design, and a 63% chance under the single quorum design.</p>
<p>If this adversary actually controlled an incredible 50% of the service node network it would be quite difficult to avoid a compromise: he would have quorum supermajority votes about 2% of the time under the single quorum approach, and 0.3% of the time under the overlapping quorum approach. Such an adversary would have a 95% chance of quorum ownership at least once <em>per day</em> with a quorum of 20, and a 35% chance per day with overlapping quorums.</p>
<p>It is worth pointing out, in passing, that these probabilities are countered by the economic design of Loki: even if such adversaries existed, they would have a strong financial incentive to ensure that the network is not compromised as such a compromise would likely have a significant negative impact on their own holdings, which are heavily invested and locked into service node stakes.</p>
<p>There is, of course, some desirable statistical properties of making a quorum <em>longer</em>: if quorums changed on a 10 block cycle you’d cut the probability of compromise by nearly half (to 0.45% in the overlapping case). This gain isn’t huge, though; moreover the longer the quorum becomes the more complications can arise from service node deregistrations, and the more time you allow for coordination between service node operators looking to cheat the system.</p>
<p>Instead, if we wanted to further increase the security of Blink transactions, a preferable approach would be to use a triple quorum. It could also be possible to enable an opt-in triple quorum, at a higher fee, to allow users to send with a paranoid level of assurance. (This is now, however, part of the current Blink plan.)</p>
<h3 id="quorum-selection-block-and-checkpointing-rationale">4.2.2 Quorum selection block and checkpointing rationale</h3>
<p>Using a lag of 30 blocks for quorum determination was chosen to interact with Loki checkpointing. Unlike checkpointing and deregistration quorums, a change in Blink quorums would be highly undesirable as the validity of the Blink signature would no longer hold. Thus we want to use a height from the blockchain that is sufficiently far back as to be highly likely to be made immutable via checkpointing. By basing the quorum on <em>h₀</em>-30 we give ample time for checkpointing even if 2-3 checkpoints have been missed.</p>
<p>For example, if blinking at height 1000 then <em>Q’</em> begins at 1005, which means the relevant block for determination of <em>Q’</em> is 975. Checkpointing normally occurs every 4 blocks with immutability occurring after 3 checkpoints. Thus in typical times it can be up to 4 blocks since the last checkpoint quorum, which itself establishes a checkpoint on a block 4 blocks earlier. Allowing up to 2 blocks for the quorum to vote and disseminate the checkpoint to the network this means the first checkpoint is usually between 4 and 10 blocks ago, the second is 8-14 blocks ago, and the third, immutable checkpoint is 12-18 blocks ago. If one of these checkpoints were missed (for example because of a quorum failure) then the immutable checkpoint could be 16-22 blocks ago; and if three were missed, up to 30 blocks ago. Thus the <em>h₀</em>-35 rule establishes that both quorum selections are established by a block at least 30 blocks in the past, which allows Blink to tolerate up to 3 missing checkpoints.</p>
<p>To further secure Blink transactions we further require that the quorum seed heights are checkpoint-immutable: both the initiating lokid and the quorum service nodes will verify that the quorum seed height is in fact checkpointed, refusing to sign (and thus failing the Blink if enough fail to see the required checkpoints) if it is not. This ensures that Blink transactions are secure by preferring to fail a Blink signature rather than include one that has any chance of being invalidated by a block reorganization.</p>
<h2 id="quorum-validation">4.3 Quorum validation</h2>
<p>Some potential cases are depicted below:</p>
<figure>
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuNDAuMSAoMjAxNjEyMjUuMDMwNCkKIC0tPgo8IS0tIFRpdGxlOiBxdW9ydW1zIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI3ODdwdCIgaGVpZ2h0PSIxMzBwdCIKIHZpZXdCb3g9IjAuMDAgMC4wMCA3ODcuMDAgMTMwLjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGcgaWQ9ImdyYXBoMCIgY2xhc3M9ImdyYXBoIiB0cmFuc2Zvcm09InNjYWxlKDEgMSkgcm90YXRlKDApIHRyYW5zbGF0ZSg0IDEyNikiPgo8dGl0bGU+cXVvcnVtczwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0idHJhbnNwYXJlbnQiIHBvaW50cz0iLTQsNCAtNCwtMTI2IDc4MywtMTI2IDc4Myw0IC00LDQiLz4KPCEtLSBibG9ja3MgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+YmxvY2tzPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLS41IDAsLTQ2LjUgNzc5LC00Ni41IDc3OSwtLjUgMCwtLjUiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzEuNSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aGVpZ2h0OjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIwLC0yMy41IDYzLC0yMy41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMS41IiB5PSItOC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPnF1b3J1bTo8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNjMsLS41IDYzLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3NyIgeT0iLTE5LjgiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+Li4uPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjkxLC0uNSA5MSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTEzIiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDAwPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjEzNSwtMjMuNSAxMzUsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1NyIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAwMTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxNzksLTIzLjUgMTc5LC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMDEiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMDI8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjIzLC0yMy41IDIyMywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjQ1IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDAzPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI2NywtMjMuNSAyNjcsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI4OSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAwNDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI5MSwtMjMuNSAzMTEsLTIzLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIwMSIgeT0iLTguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5R4oKBPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjMxMSwtLjUgMzExLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMzMiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMDU8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzU1LC0yMy41IDM1NSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzc3IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDA2PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM5OSwtMjMuNSAzOTksLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQyMSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAwNzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0NDMsLTIzLjUgNDQzLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0NjUiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMDg8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDg3LC0yMy41IDQ4NywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTA5IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDA5PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjMxMSwtMjMuNSA1MzEsLTIzLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQyMSIgeT0iLTguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5R4oKCPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjUzMSwtLjUgNTMxLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1NTMiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMTA8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNTc1LC0yMy41IDU3NSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTk3IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDExPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjYxOSwtMjMuNSA2MTksLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjY0MSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAxMjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI2NjMsLTIzLjUgNjYzLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2ODUiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMTM8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNzA3LC0yMy41IDcwNywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzI5IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDE0PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjUzMSwtMjMuNSA3NTEsLTIzLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjY0MSIgeT0iLTguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5R4oKDPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9Ijc1MSwtLjUgNzUxLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI3NjUiIHk9Ii0xOS44IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPi4uLjwvdGV4dD4KPC9nPgo8IS0tIHR4MSAtLT4KPGcgaWQ9Im5vZGUyIiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT50eDE8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwY2QiIHBvaW50cz0iMTcxLC04My41IDE3MSwtMTIxLjUgMjMwLC0xMjEuNSAyMzAsLTgzLjUgMTcxLC04My41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIwMC41IiB5PSItMTA2LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDBjZCI+VFjigoE8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIwMC41IiB5PSItOTEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMGNkIj5oPTEwMDI8L3RleHQ+CjwvZz4KPCEtLSB0eDEmIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlMSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+dHgxJiM0NTsmZ3Q7YmxvY2tzOmgwPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMGNkIiBzdHJva2UtZGFzaGFycmF5PSIxLDUiIGQ9Ik0xNzAuNzA3MiwtOTYuNDcyN0MxNDcuNTcxMSwtOTAuMDMxNSAxMTguNTY0MiwtNzcuNDI0MyAxMTMuMzI4OCwtNTQuMDkwOCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMGNkIiBzdHJva2U9IiMwMDAwY2QiIHBvaW50cz0iMTE1LjkyMzYsLTUzLjY3MDcgMTEyLjUsLTQ2LjUgMTEwLjcwNDYsLTU0LjI0MDYgMTE1LjkyMzYsLTUzLjY3MDciLz4KPC9nPgo8IS0tIHR4MSYjNDU7Jmd0O2Jsb2NrcyAtLT4KPGcgaWQ9ImVkZ2UyIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT50eDEmIzQ1OyZndDtibG9ja3M6bjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBjZCIgc3Ryb2tlLWRhc2hhcnJheT0iMSw1IiBkPSJNMTc1LjQxNTMsLTgzLjQ0MjRDMTY3LjMwOTcsLTc1LjQzODQgMTU5Ljc3NCwtNjUuMzU4MiAxNTcuMzI3NiwtNTQuMDc3Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwY2QiIHN0cm9rZT0iIzAwMDBjZCIgcG9pbnRzPSIxNTkuOTIzOSwtNTMuNjcwNiAxNTYuNSwtNDYuNSAxNTQuNzA0OSwtNTQuMjQwNyAxNTkuOTIzOSwtNTMuNjcwNiIvPgo8L2c+CjwhLS0gdHgxJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnR4MSYjNDU7Jmd0O2Jsb2NrczpoMjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBjZCIgZD0iTTIwMC41LC04My4zMjA3QzIwMC41LC03NC43MDM4IDIwMC41LC02NC4yMTc0IDIwMC41LC01NC4xMTQxIi8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwY2QiIHN0cm9rZT0iIzAwMDBjZCIgcG9pbnRzPSIyMDMuMTI1MSwtNTQgMjAwLjUsLTQ2LjUgMTk3Ljg3NTEsLTU0IDIwMy4xMjUxLC01NCIvPgo8L2c+CjwhLS0gdHgxJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTQiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnR4MSYjNDU7Jmd0O2Jsb2NrczpoMzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBjZCIgc3Ryb2tlLWRhc2hhcnJheT0iNSwyIiBkPSJNMjI1LjU4NDcsLTgzLjQ0MjRDMjMzLjY5MDMsLTc1LjQzODQgMjQxLjIyNiwtNjUuMzU4MiAyNDMuNjcyNCwtNTQuMDc3Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwY2QiIHN0cm9rZT0iIzAwMDBjZCIgcG9pbnRzPSIyNDYuMjk1MSwtNTQuMjQwNyAyNDQuNSwtNDYuNSAyNDEuMDc2MSwtNTMuNjcwNiAyNDYuMjk1MSwtNTQuMjQwNyIvPgo8L2c+CjwhLS0gdHgxJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTUiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnR4MSYjNDU7Jmd0O2Jsb2NrczpoNDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBjZCIgc3Ryb2tlLWRhc2hhcnJheT0iNSwyIiBkPSJNMjMwLjI5MjgsLTk2LjQ3MjdDMjUzLjQyODksLTkwLjAzMTUgMjgyLjQzNTgsLTc3LjQyNDMgMjg3LjY3MTIsLTU0LjA5MDgiLz4KPHBvbHlnb24gZmlsbD0iIzAwMDBjZCIgc3Ryb2tlPSIjMDAwMGNkIiBwb2ludHM9IjI5MC4yOTU0LC01NC4yNDA2IDI4OC41LC00Ni41IDI4NS4wNzY0LC01My42NzA3IDI5MC4yOTU0LC01NC4yNDA2Ii8+CjwvZz4KPCEtLSB0eDIgLS0+CjxnIGlkPSJub2RlMyIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+dHgyPC90aXRsZT4KPHBvbHlnb24gZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA2NDAwIiBwb2ludHM9IjM0NywtODMuNSAzNDcsLTEyMS41IDQwNiwtMTIxLjUgNDA2LC04My41IDM0NywtODMuNSIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNzYuNSIgeT0iLTEwNi4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDY0MDAiPlRY4oKCPC90ZXh0Pgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNzYuNSIgeT0iLTkxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwNjQwMCI+aD0xMDA2PC90ZXh0Pgo8L2c+CjwhLS0gdHgyJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTYiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnR4MiYjNDU7Jmd0O2Jsb2NrczpoNDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwNjQwMCIgc3Ryb2tlLWRhc2hhcnJheT0iMSw1IiBkPSJNMzQ2LjcwNzIsLTk2LjQ3MjdDMzIzLjU3MTEsLTkwLjAzMTUgMjk0LjU2NDIsLTc3LjQyNDMgMjg5LjMyODgsLTU0LjA5MDgiLz4KPHBvbHlnb24gZmlsbD0iIzAwNjQwMCIgc3Ryb2tlPSIjMDA2NDAwIiBwb2ludHM9IjI5MS45MjM2LC01My42NzA3IDI4OC41LC00Ni41IDI4Ni43MDQ2LC01NC4yNDA2IDI5MS45MjM2LC01My42NzA3Ii8+CjwvZz4KPCEtLSB0eDImIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlNyIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+dHgyJiM0NTsmZ3Q7YmxvY2tzOmg1PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA2NDAwIiBzdHJva2UtZGFzaGFycmF5PSIxLDUiIGQ9Ik0zNTEuNDE1MywtODMuNDQyNEMzNDMuMzA5NywtNzUuNDM4NCAzMzUuNzc0LC02NS4zNTgyIDMzMy4zMjc2LC01NC4wNzciLz4KPHBvbHlnb24gZmlsbD0iIzAwNjQwMCIgc3Ryb2tlPSIjMDA2NDAwIiBwb2ludHM9IjMzNS45MjM5LC01My42NzA2IDMzMi41LC00Ni41IDMzMC43MDQ5LC01NC4yNDA3IDMzNS45MjM5LC01My42NzA2Ii8+CjwvZz4KPCEtLSB0eDImIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlOCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+dHgyJiM0NTsmZ3Q7YmxvY2tzOmg2PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA2NDAwIiBkPSJNMzc2LjUsLTgzLjMyMDdDMzc2LjUsLTc0LjcwMzggMzc2LjUsLTY0LjIxNzQgMzc2LjUsLTU0LjExNDEiLz4KPHBvbHlnb24gZmlsbD0iIzAwNjQwMCIgc3Ryb2tlPSIjMDA2NDAwIiBwb2ludHM9IjM3OS4xMjUxLC01NCAzNzYuNSwtNDYuNSAzNzMuODc1MSwtNTQgMzc5LjEyNTEsLTU0Ii8+CjwvZz4KPCEtLSB0eDImIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlOSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+dHgyJiM0NTsmZ3Q7YmxvY2tzOmg3PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA2NDAwIiBzdHJva2UtZGFzaGFycmF5PSI1LDIiIGQ9Ik00MDIuNDE1OSwtODMuMzAyNEM0MTAuNjIxNywtNzUuMzQzOCA0MTguMjA2OCwtNjUuMzI5MSA0MjAuNjY3NywtNTQuMDY5NyIvPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iNDIzLjI4OTUsLTU0LjI0MiA0MjEuNSwtNDYuNSA0MTguMDcxLC01My42NjgyIDQyMy4yODk1LC01NC4yNDIiLz4KPC9nPgo8IS0tIHR4MiYjNDU7Jmd0O2Jsb2NrcyAtLT4KPGcgaWQ9ImVkZ2UxMCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+dHgyJiM0NTsmZ3Q7YmxvY2tzOmg4PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDA2NDAwIiBzdHJva2UtZGFzaGFycmF5PSI1LDIiIGQ9Ik00MDYuMTM1NywtOTYuNzExOEM0MjkuNTk4NywtOTAuMzg0NiA0NTkuMjkwMywtNzcuODI2MyA0NjQuNjUxMiwtNTQuMTk0OCIvPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iNDY3LjI4NjgsLTU0LjI0MjYgNDY1LjUsLTQ2LjUgNDYyLjA2ODQsLTUzLjY2NjkgNDY3LjI4NjgsLTU0LjI0MjYiLz4KPC9nPgo8IS0tIHR4MyAtLT4KPGcgaWQ9Im5vZGU0IiBjbGFzcz0ibm9kZSI+Cjx0aXRsZT50eDM8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9IiNiMjIyMjIiIHBvaW50cz0iNDgwLC04My41IDQ4MCwtMTIxLjUgNTM5LC0xMjEuNSA1MzksLTgzLjUgNDgwLC04My41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwOS41IiB5PSItMTA2LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iI2IyMjIyMiI+VFjigoM8L3RleHQ+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwOS41IiB5PSItOTEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjYjIyMjIyIj5oPTEwMDk8L3RleHQ+CjwvZz4KPCEtLSB0eDMmIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlMTEiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnR4MyYjNDU7Jmd0O2Jsb2NrczpoNzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2IyMjIyMiIgc3Ryb2tlLWRhc2hhcnJheT0iMSw1IiBkPSJNNDc5LjcwNzIsLTk2LjQ3MjdDNDU2LjU3MTEsLTkwLjAzMTUgNDI3LjU2NDIsLTc3LjQyNDMgNDIyLjMyODgsLTU0LjA5MDgiLz4KPHBvbHlnb24gZmlsbD0iI2IyMjIyMiIgc3Ryb2tlPSIjYjIyMjIyIiBwb2ludHM9IjQyNC45MjM2LC01My42NzA3IDQyMS41LC00Ni41IDQxOS43MDQ2LC01NC4yNDA2IDQyNC45MjM2LC01My42NzA3Ii8+CjwvZz4KPCEtLSB0eDMmIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlMTIiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnR4MyYjNDU7Jmd0O2Jsb2NrczpoODwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2IyMjIyMiIgc3Ryb2tlLWRhc2hhcnJheT0iMSw1IiBkPSJNNDg0LjQxNTMsLTgzLjQ0MjRDNDc2LjMwOTcsLTc1LjQzODQgNDY4Ljc3NCwtNjUuMzU4MiA0NjYuMzI3NiwtNTQuMDc3Ii8+Cjxwb2x5Z29uIGZpbGw9IiNiMjIyMjIiIHN0cm9rZT0iI2IyMjIyMiIgcG9pbnRzPSI0NjguOTIzOSwtNTMuNjcwNiA0NjUuNSwtNDYuNSA0NjMuNzA0OSwtNTQuMjQwNyA0NjguOTIzOSwtNTMuNjcwNiIvPgo8L2c+CjwhLS0gdHgzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTEzIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT50eDMmIzQ1OyZndDtibG9ja3M6aDk8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNiMjIyMjIiIGQ9Ik01MDkuNSwtODMuMzIwN0M1MDkuNSwtNzQuNzAzOCA1MDkuNSwtNjQuMjE3NCA1MDkuNSwtNTQuMTE0MSIvPgo8cG9seWdvbiBmaWxsPSIjYjIyMjIyIiBzdHJva2U9IiNiMjIyMjIiIHBvaW50cz0iNTEyLjEyNTEsLTU0IDUwOS41LC00Ni41IDUwNi44NzUxLC01NCA1MTIuMTI1MSwtNTQiLz4KPC9nPgo8IS0tIHR4MyYjNDU7Jmd0O2Jsb2NrcyAtLT4KPGcgaWQ9ImVkZ2UxNCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+dHgzJiM0NTsmZ3Q7YmxvY2tzOmgxMDwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2IyMjIyMiIgc3Ryb2tlLWRhc2hhcnJheT0iNSwyIiBkPSJNNTM0LjU4NDcsLTgzLjQ0MjRDNTQyLjY5MDMsLTc1LjQzODQgNTUwLjIyNiwtNjUuMzU4MiA1NTIuNjcyNCwtNTQuMDc3Ii8+Cjxwb2x5Z29uIGZpbGw9IiNiMjIyMjIiIHN0cm9rZT0iI2IyMjIyMiIgcG9pbnRzPSI1NTUuMjk1MSwtNTQuMjQwNyA1NTMuNSwtNDYuNSA1NTAuMDc2MSwtNTMuNjcwNiA1NTUuMjk1MSwtNTQuMjQwNyIvPgo8L2c+CjwhLS0gdHgzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTE1IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT50eDMmIzQ1OyZndDtibG9ja3M6aDExPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYjIyMjIyIiBzdHJva2UtZGFzaGFycmF5PSI1LDIiIGQ9Ik01MzkuMjkyOCwtOTYuNDcyN0M1NjIuNDI4OSwtOTAuMDMxNSA1OTEuNDM1OCwtNzcuNDI0MyA1OTYuNjcxMiwtNTQuMDkwOCIvPgo8cG9seWdvbiBmaWxsPSIjYjIyMjIyIiBzdHJva2U9IiNiMjIyMjIiIHBvaW50cz0iNTk5LjI5NTQsLTU0LjI0MDYgNTk3LjUsLTQ2LjUgNTk0LjA3NjQsLTUzLjY3MDcgNTk5LjI5NTQsLTU0LjI0MDYiLz4KPC9nPgo8L2c+Cjwvc3ZnPgo=" alt="Figure 2: Transactions and quorums" /><figcaption>Figure 2: Transactions and quorums</figcaption>
</figure>
<h3 id="tx-example-one">4.3.1 TX example one</h3>
<p><em>TX₁</em> is depicting a transaction submitted to a daemon which sees the current height of the network at 1002. We can think about a few different cases:</p>
<ul>
<li><p>Submitting the blink transaction normally at the known height (1002). Thus we get <em>Q = Q₁</em> and <em>Q’ = Q₂</em> for the two quorums. The initiating lokid contacts a random service node <em>q</em> from <em>Q₁</em>, passes along the transaction, and waits for a reply from <em>q</em>. <em>q</em> in turn communicates with its quorum peers and the subsequent quorum (<em>Q₂</em>) to build the required set of signatures. Once the required signatures are accumulated the transaction is released by the quorum service nodes to their peers.</p>
<p>The Blink TX is broadcast to the network. Because a majority of <em>Q₂</em> service nodes signed it and will not resign the same key images, the earliest possible Blink height to spend the same key images is 1010, which can be used by a cheating lokid at network block 1008 at the earliest.</p></li>
<li><p>Submitting slightly behind the network (1000 or 1001). This could happen, for instance, because there have been two recent blocks that the local lokid has not synchronized yet. Generally everything here works as above: the service nodes at height 1002 will still sign the block (assuming the transaction itself is valid) because the requested signature height is within 2 of their current height.</p></li>
<li><p>Submitting slightly ahead of the network (1003 or 1004). This could happen, for instance, if the local node is close to a very lucky pool that has just discovered a couple blocks that haven’t disseminated across the network yet. Again, this is handled just like the above: even though the service nodes haven’t yet seen a block newer than 1002 it still satisfies the within-2 rule and so they will still sign (assuming the transaction is valid).</p></li>
<li><p>Submitting well behind or well ahead of the network (999 or lower, or 1005 or higher). In this case the quorum will not accumulate enough signatures because the within-2 requirement is violated. In this case a failure gets returned to the initiating lokid.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p></li>
</ul>
<p>The first three (accepted) cases above all result in the earliest block a cheater could submit to being 1008 (i.e. abusing the within-2 rule to submit a h=1010 block), giving a worst case of at least 4 blocks needing to be transmitted to the network before a duplicate Blink could be submitted; since Blink dissemination is high-priority this should result in a high level of assuredness that a Blink double-spend cannot be performed in this scenario.</p>
<h3 id="tx-example-two">4.3.2 TX example two</h3>
<p><em>TX₂</em> in Figure 2 shows a transaction that is sent via a lokid that sees the current <em>h=1006</em>, i.e. in the second block of quorum <em>Q₂</em>. I’ll just ignore the <em>h&gt;1008</em> and <em>h&lt;1004</em> cases (see above for why they are dead ends).</p>
<ul>
<li><p>Case 1: Submitting <em>h</em>=1005, 1006, 1007, 1008. This case is largely the same as <em>TX₁</em>, but now the two quorums are <em>Q₂</em> and <em>Q₃</em>. The earlier a theoretical double-spending Blink could be submitted is with <em>h</em>=1015 at actual height 1013: that is, a minimum of 5 network blocks away.</p></li>
<li><p>Case 2: Submitting <em>h</em>=1004 (either due to a lagging node, or a malicious actor). This ends up using the same quorums as <em>TX₁</em> (that is, <em>Q₁</em> and <em>Q₂</em>). As in <em>TX₁</em>, the earliest possible double spend could be submitted at 1008.</p></li>
</ul>
<p>Case 2 here represents the worst possible scenario: there are just two network blocks between the current height (1006) and the height at which a blink transaction could be submitted to a completely independent quorum pair. There is a potential issue here from an attacker, discussed in further detail below.</p>
<h3 id="tx-example-three">4.3.3 TX example three</h3>
<p><em>TX₃</em> is included for completeness to show that cheating <em>ahead</em> by a quorum has no advantage for a potential attacker. This depicts the sending transaction at <em>h</em>=1009. The attack essentially has two relevant choices: <em>h</em>=1007–1009, or <em>h</em>=1010,1011. In the first case, he gets quorums <em>Q₂</em> and <em>Q₃</em>, making his earlier possible Blink double-spend at <em>h</em>=1015 (submitted at <em>h</em>=1013), which is</p>
<p>Stats geek note: the probability of being 3+ blocks behind the network with lag <em>L</em> seconds is the CDF value of a Poisson distribution with λ=<em>L</em>/120 at <em>k</em>=3.</p>
<h2 id="repeated-signing-of-the-same-transaction">4.4 Repeated signing of the same transaction</h2>
<p>One possible Blink failure mode is that the requested signature height, <em>h</em>, is seen as too old (or even too new) by some or all members of the service node quorum if it does not fit within their ±2 tolerance. This could be caused, for example, by the lokid the wallet is talking to being out of sync. In the case of such a failure, the calling lokid could check for new blocks and, if changed, resubmit the transaction for signing at an updated signing height <em>h</em>. We want this resubmission to succeed even if it goes to the same quorum, as it makes the Blink process more robust to network synchronization issues.</p>
<p>This means, in particular, that service nodes will need to add an exception to the normal key image blacklisting if asked to re-sign the exact same transaction for which the key images were blacklisted.</p>
<h2 id="signature-failure-key-images-may-stay-unblinkable-for-up-to-10-blocks.">4.5 Signature failure: key images may stay unblinkable (for up to 10 blocks).</h2>
<p>When a service node signs a transaction as part of a given quorum it will never sign a different transaction containing any of the same key images again as part of that quorum. Since failures are possible for multiple reasons, however, it does not block the key images of a transaction that it refused to sign.</p>
<p>It is possible, however, for a transaction to fail to be signed by a supermajority while still being signed by a superminority (that is, by enough other nodes to prevent a supermajority). This case is expected to be rare: the criteria for service node disagreement is small: effectively you would need (roughly) half of the service nodes to see something wrong with the transaction. It is not impossible, however: if a regular transaction spending the same key images is mined and the block transmitted in the middle of signing the blink could fail.</p>
<p>The user-facing problem that could arise here is that the transaction that gets signed includes multiple key images, only some of which are ineligible. The service nodes that signed the transaction, however, end up locking <em>all</em> of the key images for the duration of the quorum ( i.e. the next 4–9 blocks), so even once the user wallet sees the updated chain a new transaction <em>might</em> end up trying to blink using an input that is temporarily non-blinkable (note that it <em>will</em> still be regularly minable since the Blink was not transmitted due to the quorum failure).</p>
<p>This case seems rare: it would require a legitimate user spending regular transactions and blinking at the same time from different wallets. It’s possible, of course, but given the rarity and the relatively minor consequence (not being able to Blink those outputs for 10–20 minutes) for now we will simple leave this as a known limitation.</p>
<h2 id="blink-transactions-entering-the-mempool">4.6 Blink transactions entering the mempool</h2>
<p>Blink transactions themselves are perfectly ordinary transactions on the blockchain: the signatures applied by service nodes do <em>not</em> end up as part of the transaction that gets mined into the chain. Instead this metadata is shared and synchronized between nodes from the time when a Blink transaction enters the mempool until the transaction is mined <em>and</em> secured behind an immutable Loki checkpoint boundary.</p>
<p>An incoming Blink transaction in the mempool will also be transmitted with the Blink height and the verifiable Blink signatures at which the transaction was signed. Based on this, a loki node receiving a blink transaction will perform multiple actions:</p>
<ul>
<li>verify that the Blink signatures are the correct signers for the given height, and that the signatures are valid (and if not reject the Blink transaction).</li>
<li>check to see if any of the key images were spent in or before the last irreversible checkpoint block: if so, reject the Blink transaction.</li>
<li>check to see if the mempool already contains any Blink transactions that have a higher priority (i.e. lower height) than the incoming transactions, and if so, refuse the incoming transactions. (This shouldn’t be possible, but is included as a safeguard to maintain consensus).</li>
<li>check the current chain back to the last irreversible checkpoint: if any blocks contain any transactions that spend any of the key images in the new Blink transaction then roll back the chain as much as needed to remove those transactions from the blockchain, re-adding any rolled back transactions into the mempool (as occurs already with any reorg).</li>
<li>reject any non-Blink transaction from the mempool that spend the same key images as the new Blink transaction (if we just rolled back then this means immediately rejecting the conflicting transactions).</li>
<li>reject any <em>Blink</em> transactions from the mempool that spend the same key images but have a lower priority (i.e. higher height) than the new Blink transaction. This should not be possible in general, but needs to be specified anyway to avoid a consensus failure (as with the mirrored check above). Note that this actual removal could cascade if there are other transactions referencing the removed Blink transaction.</li>
</ul>
<p>Another difference with Blink transactions is that they should not be subject to the existing 2-week mempool transaction timeout. We don’t want someone to be able to submit a low-priority Blink transaction while the network is flooded with higher priority transactions and be able to wait out the transaction until timeout. As long as Blink transactions stay in the mempool until mined all an attacker can do is delay the transaction from being mined, but cannot cause it to be dropped no matter how long he prevents mining. In the unlikely event of a bug that makes a Blink transaction inadmissible to the blockchain for some unforeseen reason, this approach will keep the transaction alive indefinitely until the bug can be addressed.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<p>Second, Blink transactions need to be more actively propagated across the network than current transactions. Currently the mempool is not actively synchronized across nodes; instead new transactions are simply broadcast to all connected peers when received. A new node, a node that was temporarily down when the transaction propagated across the network, or a node that has had its mempool manually flushed does not receive existing mempool transactions from peers if it misses it the first time. This needs to change for Blink transactions: when a p2p connection is established we need each peer to send the other a list of any pending Blink transaction details it doesn’t already have. Effectively we need Blink transactions in the mempool to become first-class synchronization objects, just like blocks.</p>
<p>Finally, synchronized Blink transactions may not be (and do not need to be) identical across the network in terms of attached quorum signatures: it is entirely possible for two nodes to receive a <em>different</em> set of 14 signatures: so long as all are valid for the quorum</p>
<h2 id="blink-transactions-entering-the-blockchain">4.7 Blink transactions entering the blockchain</h2>
<p>A transaction entering the blockchain from the mempool requires two changes: first, the Blink transaction’s unspent amount now includes both the tx fee, as before, but now <em>also</em> the Blink fee. Second, because transactions can reference other Blink transactions currently in the mempool this puts an ordering on transactions: if A includes B in its ring signatures (whether as the actual key image or a decoy) then there is an implied ordering for mined block selection: A cannot be included in a block before the block in which B is included. This requires, of course, changes to the transaction selection algorithm used to construct block templates for miners.</p>
<h2 id="re-blinking-implementation">4.8 Re-Blinking implementation</h2>
<p>As discussed in <a href="#re-blinking">Re-blinking</a> we need received Blink funds to be instantly spendable. That means that the recipient’s wallet needs to recognize that those received funds are immediately spendable, whether in a new non-Blink transaction or in a new Blink transaction. In either case this means the new transaction will spend outputs that aren’t yet on the chain, but are still in pending Blink transactions in the mempool. We need to update lokid and the wallet allow this.</p>
<p>This does, however, raise another important issue, addressed in the next section.</p>
<h2 id="ring-signature-implications">4.9 Ring signature implications</h2>
<p>The anonymity in Loki depends on the actual and decoy outputs being included in the transaction ring signature being indistinguishable. Quick turn-around <a href="#re-blinking-implementation">re-blinking</a> breaks that with the current ring signature selection in two ways:</p>
<p>First, a Blink transaction that enters the mempool that includes a mempool Blink transaction in its ring signature provides a perfect link between the transactions because currently only blockchain transactions but not mempool transactions are ever included in a ring signature.</p>
<p>Even if you don’t have the mempool history you can still infer likely links between Blink transactions that are very close together (i.e. within a small number of blocks). As outputs in the same block (or within a couple blocks) are highly unlikely to occur naturally, seeing such transactions in the mempool give a high probability that the transactions are linked.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>To get around this problem, we will need to update the ring signature construction to be able to select from both existing blockchain transactions <em>and</em> Blink transactions in the mempool for both Blink transactions <em>and regular transactions</em>. (This of course imposes additional mempool ordering constraints to those discussed in the <a href="#blink-transactions-entering-the-blockchain">blockchain</a> section as ordering also applies to non-Blink transactions using mempool decoys.) Further investigation will be needed to determine a good selection probability (and will likely need tweaking in future releases), but we will aim to be on the side of having too high a probability: using too <em>low</em> a probability is much worse as it would make Blink transactions still stand out (albeit imperfectly).</p>
<p>Potentially including mempool Blink transactions in normal transaction ring signatures is important as well: because a Blink transaction is instantly spendable, a non-Blink transaction including a recent Blink transaction would similarly link the outputs together. Thus we potentially include Blink dummy transactions in <em>all</em> transactions (which has the separate advantage of simplifying the code: building a Blink transaction and building a regular transaction will be identical).</p>
<h2 id="blink-and-checkpoints">4.10 Blink and checkpoints</h2>
<p>Blink transaction metadata (i.e. quorum signatures, signing height) is meant to be temporary data that only needs to be kept until the transaction is unequivocally committed to the blockchain. Thus Blink is designed to work with Loki’s checkpointing feature: once the transaction has passed the point where it is not reversible—that is, once it has been signed by three checkpoint quorums—service nodes can discard the metadata.</p>
<h2 id="quorum-communication">4.11 Quorum communication</h2>
<p>Current quorum communication (e.g. for deregistration voting or for the upcoming checkpointing support) relies on a gossip protocol to carry messages over the loki p2p layer. While this is manageable for those applications it is not going to be sufficiently scalable for Blink quorum voting.</p>
<p>Instead part of the Blink development will be to build a direct communication layer where service nodes connect directly to one another for quorum purposes. The initial plan is for quorum SNs to communicate directly with each (using the SN public IP being added in <a href="https://github.com/loki-project/loki/pull/622">#622</a>). This communication layer will also be designed to handle quorum traffic for service node deregistration and allow faster and more efficient communication in those scenarios as well.</p>
<p>The specific implementation details will be developed further during the Blink implementation; the current plan is to create a relatively simple SN-to-SN protocol using ZMQ (which is already a loki core dependency) over which quorum members communicate, and over which the initiating lokid contacts quorum service nodes to begin the Blink signing process. The initial approach here is to use a fully-connected quorum: 9 open connections, roughly half inbound and half outbound, for each SN, held open (and reestablished upon disconnection) for the duration of the Blink quorum validity.</p>
<p>As a simple fully connected approach, the following table shows node-to-node connections within a quorum:</p>
<figure>
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuNDAuMSAoMjAxNjEyMjUuMDMwNCkKIC0tPgo8IS0tIFRpdGxlOiBicWNvbW0gUGFnZXM6IDEgLS0+Cjxzdmcgd2lkdGg9IjUyNnB0IiBoZWlnaHQ9IjI4NXB0Igogdmlld0JveD0iMC4wMCAwLjAwIDUyNi4wMCAyODUuMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZyBpZD0iZ3JhcGgwIiBjbGFzcz0iZ3JhcGgiIHRyYW5zZm9ybT0ic2NhbGUoMSAxKSByb3RhdGUoMCkgdHJhbnNsYXRlKDQgMjgxKSI+Cjx0aXRsZT5icWNvbW08L3RpdGxlPgo8cG9seWdvbiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9InRyYW5zcGFyZW50IiBwb2ludHM9Ii00LDQgLTQsLTI4MSA1MjIsLTI4MSA1MjIsNCAtNCw0Ii8+CjwhLS0gcTAgLS0+CjxnIGlkPSJub2RlMSIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+cTA8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMCwtMjMuNSAwLC0yNzYuNSA0MjgsLTI3Ni41IDQyOCwtMjMuNSAwLC0yMy41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxLjUiIHk9Ii0yNjEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5RPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTI1My41IDQzLC0yNTMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTIzOC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKBPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTIzMC41IDQzLC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTIxNS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKCPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTIwNy41IDQzLC0yMDcuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTE5Mi4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKDPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTE4NC41IDQzLC0xODQuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTE2OS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKEPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTE2MS41IDQzLC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKFPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTEzOC41IDQzLC0xMzguNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTEyMy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKGPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTExNS41IDQzLC0xMTUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjEuNSIgeT0iLTEwMC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKHPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTkyLjUgNDMsLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxLjUiIHk9Ii03Ny4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKIPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTY5LjUgNDMsLTY5LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxLjUiIHk9Ii01NC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKJPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjAsLTQ2LjUgNDMsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxLjUiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKB4oKAPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQzLC0yMy41IDQzLC0yNzYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjIiIHk9Ii0yNjEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5TTuKCgTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0MywtMjUzLjUgODEsLTI1My41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2MiIgeT0iLTIzOC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDMsLTIzMC41IDgxLC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjIiIHk9Ii0yMTUuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQzLC0yMDcuNSA4MSwtMjA3LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjYyIiB5PSItMTkyLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0MywtMTg0LjUgODEsLTE4NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2MiIgeT0iLTE2OS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDMsLTE2MS41IDgxLC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjIiIHk9Ii0xNDYuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQzLC0xMzguNSA4MSwtMTM4LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjYyIiB5PSItMTIzLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0MywtMTE1LjUgODEsLTExNS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2MiIgeT0iLTEwMC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDMsLTkyLjUgODEsLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjYyIiB5PSItNzcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQzLC02OS41IDgxLC02OS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI2MiIgeT0iLTU0LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0MywtNDYuNSA4MSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjIiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iODEsLTIzLjUgODEsLTI3Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMDAiIHk9Ii0yNjEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5TTuKCgjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMjUzLjUgMTE5LC0yNTMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMjM4LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMjMwLjUgMTE5LC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMjE1LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+eDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMjA3LjUgMTE5LC0yMDcuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMTkyLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMTg0LjUgMTE5LC0xODQuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMTY5LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMTYxLjUgMTE5LC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMTQ2LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMTM4LjUgMTE5LC0xMzguNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMTIzLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtMTE1LjUgMTE5LC0xMTUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTAwIiB5PSItMTAwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtOTIuNSAxMTksLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iLTc3LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtNjkuNSAxMTksLTY5LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iLTU0LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI4MSwtNDYuNSAxMTksLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEwMCIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxMTksLTIzLjUgMTE5LC0yNzYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTM4IiB5PSItMjYxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+U07igoM8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTE5LC0yNTMuNSAxNTcsLTI1My41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMzgiIHk9Ii0yMzguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjExOSwtMjMwLjUgMTU3LC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTM4IiB5PSItMjE1LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxMTksLTIwNy41IDE1NywtMjA3LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzOCIgeT0iLTE5Mi4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTE5LC0xODQuNSAxNTcsLTE4NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMzgiIHk9Ii0xNjkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjExOSwtMTYxLjUgMTU3LC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTM4IiB5PSItMTQ2LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxMTksLTEzOC41IDE1NywtMTM4LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzOCIgeT0iLTEyMy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTE5LC0xMTUuNSAxNTcsLTExNS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMzgiIHk9Ii0xMDAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjExOSwtOTIuNSAxNTcsLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjEzOCIgeT0iLTc3LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxMTksLTY5LjUgMTU3LC02OS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxMzgiIHk9Ii01NC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTE5LC00Ni41IDE1NywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTM4IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE1NywtMjMuNSAxNTcsLTI3Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzYiIHk9Ii0yNjEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5TTuKChDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxNTcsLTI1My41IDE5NSwtMjUzLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE3NiIgeT0iLTIzOC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTU3LC0yMzAuNSAxOTUsLTIzMC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzYiIHk9Ii0yMTUuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE1NywtMjA3LjUgMTk1LC0yMDcuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTc2IiB5PSItMTkyLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxNTcsLTE4NC41IDE5NSwtMTg0LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE3NiIgeT0iLTE2OS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTU3LC0xNjEuNSAxOTUsLTE2MS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzYiIHk9Ii0xNDYuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE1NywtMTM4LjUgMTk1LC0xMzguNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTc2IiB5PSItMTIzLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxNTcsLTExNS41IDE5NSwtMTE1LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE3NiIgeT0iLTEwMC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTU3LC05Mi41IDE5NSwtOTIuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTc2IiB5PSItNzcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE1NywtNjkuNSAxOTUsLTY5LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE3NiIgeT0iLTU0LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxNTcsLTQ2LjUgMTk1LC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNzYiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTk1LC0yMy41IDE5NSwtMjc2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxNCIgeT0iLTI2MS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKFPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE5NSwtMjUzLjUgMjMzLC0yNTMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjE0IiB5PSItMjM4LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxOTUsLTIzMC41IDIzMywtMjMwLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxNCIgeT0iLTIxNS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTk1LC0yMDcuNSAyMzMsLTIwNy41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMTQiIHk9Ii0xOTIuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE5NSwtMTg0LjUgMjMzLC0xODQuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjE0IiB5PSItMTY5LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxOTUsLTE2MS41IDIzMywtMTYxLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxNCIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTk1LC0xMzguNSAyMzMsLTEzOC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMTQiIHk9Ii0xMjMuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE5NSwtMTE1LjUgMjMzLC0xMTUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjE0IiB5PSItMTAwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxOTUsLTkyLjUgMjMzLC05Mi41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMTQiIHk9Ii03Ny4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMTk1LC02OS41IDIzMywtNjkuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjE0IiB5PSItNTQuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjE5NSwtNDYuNSAyMzMsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjIxNCIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyMzMsLTIzLjUgMjMzLC0yNzYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjUyIiB5PSItMjYxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+U07igoY8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjMzLC0yNTMuNSAyNzEsLTI1My41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyNTIiIHk9Ii0yMzguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjIzMywtMjMwLjUgMjcxLC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjUyIiB5PSItMjE1LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyMzMsLTIwNy41IDI3MSwtMjA3LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI1MiIgeT0iLTE5Mi4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjMzLC0xODQuNSAyNzEsLTE4NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyNTIiIHk9Ii0xNjkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjIzMywtMTYxLjUgMjcxLC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjUyIiB5PSItMTQ2LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyMzMsLTEzOC41IDI3MSwtMTM4LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI1MiIgeT0iLTEyMy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjMzLC0xMTUuNSAyNzEsLTExNS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyNTIiIHk9Ii0xMDAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjIzMywtOTIuNSAyNzEsLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI1MiIgeT0iLTc3LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyMzMsLTY5LjUgMjcxLC02OS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyNTIiIHk9Ii01NC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjMzLC00Ni41IDI3MSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjUyIiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI3MSwtMjMuNSAyNzEsLTI3Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyOTAiIHk9Ii0yNjEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5TTuKChzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyNzEsLTI1My41IDMwOSwtMjUzLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI5MCIgeT0iLTIzOC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjcxLC0yMzAuNSAzMDksLTIzMC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyOTAiIHk9Ii0yMTUuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI3MSwtMjA3LjUgMzA5LC0yMDcuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjkwIiB5PSItMTkyLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyNzEsLTE4NC41IDMwOSwtMTg0LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI5MCIgeT0iLTE2OS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjcxLC0xNjEuNSAzMDksLTE2MS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyOTAiIHk9Ii0xNDYuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI3MSwtMTM4LjUgMzA5LC0xMzguNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjkwIiB5PSItMTIzLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyNzEsLTExNS41IDMwOSwtMTE1LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI5MCIgeT0iLTEwMC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMjcxLC05Mi41IDMwOSwtOTIuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjkwIiB5PSItNzcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI3MSwtNjkuNSAzMDksLTY5LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI5MCIgeT0iLTU0LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyNzEsLTQ2LjUgMzA5LC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyOTAiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzA5LC0yMy41IDMwOSwtMjc2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMyOCIgeT0iLTI2MS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKIPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjMwOSwtMjUzLjUgMzQ3LC0yNTMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzI4IiB5PSItMjM4LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzMDksLTIzMC41IDM0NywtMjMwLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMyOCIgeT0iLTIxNS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzA5LC0yMDcuNSAzNDcsLTIwNy41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMjgiIHk9Ii0xOTIuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjMwOSwtMTg0LjUgMzQ3LC0xODQuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzI4IiB5PSItMTY5LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzMDksLTE2MS41IDM0NywtMTYxLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMyOCIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzA5LC0xMzguNSAzNDcsLTEzOC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMjgiIHk9Ii0xMjMuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjMwOSwtMTE1LjUgMzQ3LC0xMTUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzI4IiB5PSItMTAwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzMDksLTkyLjUgMzQ3LC05Mi41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMjgiIHk9Ii03Ny4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzA5LC02OS41IDM0NywtNjkuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzI4IiB5PSItNTQuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjMwOSwtNDYuNSAzNDcsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMyOCIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNDcsLTIzLjUgMzQ3LC0yNzYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzY2IiB5PSItMjYxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+U07igok8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzQ3LC0yNTMuNSAzODUsLTI1My41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNjYiIHk9Ii0yMzguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM0NywtMjMwLjUgMzg1LC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzY2IiB5PSItMjE1LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+aTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNDcsLTIwNy41IDM4NSwtMjA3LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM2NiIgeT0iLTE5Mi4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmk8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzQ3LC0xODQuNSAzODUsLTE4NC41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNjYiIHk9Ii0xNjkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM0NywtMTYxLjUgMzg1LC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzY2IiB5PSItMTQ2LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNDcsLTEzOC41IDM4NSwtMTM4LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM2NiIgeT0iLTEyMy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPm88L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzQ3LC0xMTUuNSAzODUsLTExNS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNjYiIHk9Ii0xMDAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM0NywtOTIuNSAzODUsLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjM2NiIgeT0iLTc3LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+bzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzNDcsLTY5LjUgMzg1LC02OS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzNjYiIHk9Ii01NC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPng8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzQ3LC00Ni41IDM4NSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzY2IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMjMuNSAzODUsLTI3Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0MDYuNSIgeT0iLTI2MS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKB4oKAPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMjUzLjUgNDI4LC0yNTMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0yMzguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMjMwLjUgNDI4LC0yMzAuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0yMTUuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMjA3LjUgNDI4LC0yMDcuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0xOTIuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMTg0LjUgNDI4LC0xODQuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0xNjkuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5pPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMTYxLjUgNDI4LC0xNjEuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0xNDYuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMTM4LjUgNDI4LC0xMzguNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0xMjMuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtMTE1LjUgNDI4LC0xMTUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDA2LjUiIHk9Ii0xMDAuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtOTIuNSA0MjgsLTkyLjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQwNi41IiB5PSItNzcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtNjkuNSA0MjgsLTY5LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQwNi41IiB5PSItNTQuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5vPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM4NSwtNDYuNSA0MjgsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQwNi41IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj54PC90ZXh0Pgo8L2c+CjwhLS0gcTEgLS0+CjxnIGlkPSJub2RlMiIgY2xhc3M9Im5vZGUiPgo8dGl0bGU+cTE8L3RpdGxlPgo8cG9seWdvbiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDY0LC0uNSA0NjQsLTE2MS41IDUxOCwtMTYxLjUgNTE4LC0uNSA0NjQsLS41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ5MSIgeT0iLTE0Ni4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlEmIzM5OzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0NjQsLTEzOC41IDUxOCwtMTM4LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ5MSIgeT0iLTEyMy4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKBPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQ2NCwtMTE1LjUgNTE4LC0xMTUuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDkxIiB5PSItMTAwLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+U07igoI8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDY0LC05Mi41IDUxOCwtOTIuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDkxIiB5PSItNzcuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5TTuKCgzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0NjQsLTY5LjUgNTE4LC02OS41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI0OTEiIHk9Ii01NC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPlNO4oKEPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQ2NCwtNDYuNSA1MTgsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQ5MSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+U07igoU8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDY0LC0yMy41IDUxOCwtMjMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDkxIiB5PSItOC4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPi4uLjwvdGV4dD4KPC9nPgo8IS0tIHEwJiM0NTsmZ3Q7cTEgLS0+CjxnIGlkPSJlZGdlMSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+cTA6eDEmIzQ1OyZndDtxMTppMTwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTQyOCwtMTI3QzQ0MCwtMTI3IDQ0NS4yNSwtMTI3IDQ1My44NzUsLTEyNyIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDU0LC0xMzAuNTAwMSA0NjQsLTEyNyA0NTQsLTEyMy41MDAxIDQ1NCwtMTMwLjUwMDEiLz4KPC9nPgo8IS0tIHEwJiM0NTsmZ3Q7cTEgLS0+CjxnIGlkPSJlZGdlMiIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+cTA6eDImIzQ1OyZndDtxMTppMjwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTQyOCwtMTA0QzQ0MCwtMTA0IDQ0NS4yNSwtMTA0IDQ1My44NzUsLTEwNCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDU0LC0xMDcuNTAwMSA0NjQsLTEwNCA0NTQsLTEwMC41MDAxIDQ1NCwtMTA3LjUwMDEiLz4KPC9nPgo8IS0tIHEwJiM0NTsmZ3Q7cTEgLS0+CjxnIGlkPSJlZGdlMyIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+cTA6eDMmIzQ1OyZndDtxMTppMzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgZD0iTTQyOCwtODFDNDQwLC04MSA0NDUuMjUsLTgxIDQ1My44NzUsLTgxIi8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0NTQsLTg0LjUwMDEgNDY0LC04MSA0NTQsLTc3LjUwMDEgNDU0LC04NC41MDAxIi8+CjwvZz4KPCEtLSBxMCYjNDU7Jmd0O3ExIC0tPgo8ZyBpZD0iZWRnZTQiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPnEwOng0JiM0NTsmZ3Q7cTE6aTQ8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIGQ9Ik00MjgsLTU4QzQ0MCwtNTggNDQ1LjI1LC01OCA0NTMuODc1LC01OCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNDU0LC02MS41MDAxIDQ2NCwtNTggNDU0LC01NC41MDAxIDQ1NCwtNjEuNTAwMSIvPgo8L2c+CjwhLS0gcTAmIzQ1OyZndDtxMSAtLT4KPGcgaWQ9ImVkZ2U1IiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5xMDp4NSYjNDU7Jmd0O3ExOmk1PC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBkPSJNNDI4LC0zNUM0NDAsLTM1IDQ0NS4yNSwtMzUgNDUzLjg3NSwtMzUiLz4KPHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQ1NCwtMzguNTAwMSA0NjQsLTM1IDQ1NCwtMzEuNTAwMSA0NTQsLTM4LjUwMDEiLz4KPC9nPgo8L2c+Cjwvc3ZnPgo=" alt="Figure 3: Node-to-node quorum connections" /><figcaption>Figure 3: Node-to-node quorum connections</figcaption>
</figure>
<p>where “o” indicates that the row node establishes an outgoing connection to the column node and “i” indicates that the row node receives an incoming connection from the column node. Additionally once the depicted quorum Q becomes the first quorum, nodes 6–10 establish outgoing connections to nodes 1–5 of following quorum, Q’. (Similarly, but not depicted, when Q is the second quorum there will be inbound connections to SN₁ through SN₅ from the previous quorum’s last 5 nodes): first node in the quorum will open connections to nodes 2–6, the second node will open to nodes 3–7, and so on. The sixth node will open connections to nodes 7–10, the seventh node to 8–10 and 1, and so on. Additionally, once a quorum becomes the first quorum, nodes 6–10 each establish a connection to nodes 1–5 in the second quorum.</p>
<p>This is designed to be balanced: each service node establishes outgoing connections to exactly 5 other service nodes, and is connected to by a (different) 5 service nodes. Each of these</p>
<p>Additionally, each quorum would have some nodes that establish a connection to some of the nodes in the following quorum over which messages will be passed when a quorum has acquired the required supermajority of signatures.</p>
<h2 id="service-node-deregistrations">4.12 Service node deregistrations</h2>
<p>As discussed in the <a href="#quorum-selection">Quorum Selection</a> section, the service nodes that make up a quorum are chosen by excluding service nodes that have (or will) expire before the quorum completes its tasks. A related problem, however, is that there are unforseeable deregistrations that may occur (or may have already occurred) since the seed height.</p>
<p>This is partially addressed by the quorum tolerance: since a quorum required only 7 of 10 votes, it can continue to function even if 3 nodes deregister. It is, however, possible (albeit extremely unlikely) that 4 or more nodes have been deregistered from the network in either quorum, either before the quorum begins or during the quorum validity period. If this occurs, a quorum member must simply refuse to sign. This can also be checked by the initiating lokid: if it fails to build a quorum of at least 7 active nodes in each quorum it can immediately return an error to the initiating wallet that the Blink service is temporarily down.</p>
<p>The reason that we cannot add “substitute” nodes in the event of deregistrations is that it would affect the validity of quorum signatures if a blockchain reorganization should happen: such a reorganization could delay the deregistration to the point that the substitute <em>isn’t</em> actually valid anymore, thereby invalidating the Blink signature.</p>
<p>It is tempting to at least consider substitutions for deregistrations that are past an immutable checkpoint boundary, but again this would not work: though checkpoints are distributed across the network, they are a moving target that is external to the blockchain itself. Thus determining the correct set of quorum signatures would change as checkpoints propagate the network and so verification of having the <em>correct</em> set of signatures would be impossible.</p>
<p>We believe that the 7 of 10 threshold, allowing for up to three failures (including deregistrations) should be sufficient to keep Blink operational in all but extreme circumstances (such as mass Service Node deregistrations). Should this prove problematic, the recommended approach is to increase the quorum size, slightly reduce the supermajority requirement, or both.</p>
<h1 id="potential-attacks">5 Potential attacks</h1>
<p>While the basics of the above in normal operation are fine, there are several edge cases that need to be addressed specifically to prevent accidental conflict or deliberate attacks.</p>
<h2 id="double-spending-blink-tx-non-blink-tx">5.1 Double-spending Blink tx + non-Blink tx</h2>
<p>This attack would work by privately mining a block where the inputs used in a Blink transaction are spent, conducting a Blink transaction, then releasing the private block to the network after the Blink transaction has been approved. This would be a classic double spend, but because Blink transactions are 0-confirmation transactions, you don’t need a 51% attack; you would just need a single block and a bit of luck.</p>
<p>The solution to this is that Blink transactions <em>in the mempool</em> are stronger for consensus purposes than non-Blink transactions <em>on the chain</em>. That is, if a Blink-signed transaction arrives in the mempool that conflicts with (i.e. spends the same inputs as) a transaction already mined on the chain then the block containing the conflicting non-Blink transaction is <strong>no longer</strong> a valid blockchain block and must be rolled back.</p>
<p>There is a limitation to this, however: if the conflicting block has passed an irreversible checkpoint boundary then it is instead the Blink transaction that is invalid.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<h2 id="double-spending-blink-blink">5.2 Double-spending Blink + Blink</h2>
<p>Sending two parallel Blink transactions that spend some of the same inputs at the same signing height <em>h</em> isn’t possible: the approving service nodes by design will not sign twice for the same outputs, and to actually be accepted a Blink transaction must be signed by a supermajority of the service nodes in the (unique) signing quorum.</p>
<p>Sending two Blink transactions at different heights, however, can be a potential issue if exploited by something I will call “quorum hopping” and address in the next section.</p>
<h2 id="quorum-hopping">5.3 Quorum hopping</h2>
<p>In order to double-spend Blink transactions it is necessary to “quorum hop” – that is, to have your transaction signed by two independent sets of quorums. Practically speaking, that means that that you need one Blink transaction signed by <em>Q₁</em> and <em>Q₂</em>, and another spending the same outputs signed by <em>Q₃</em> and <em>Q₄</em>.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<p>For the purposes of illustration, I’ll continue with <a href="#tx-example-two">TX example two</a> from Figure 2, and I’ll assume the attacker has an arbitrary amount of hash power available. In order to quorum hop, the attacker needs to get signatures from <em>Q₁</em> and <em>Q₂</em> <strong>and</strong> signatures for another transaction spending the same outputs from <em>Q₃</em> and <em>Q₄</em>. The basic assurance is that while the current network is at height 1006, <em>Q₄</em> won’t sign a transaction. However, 1006 is close enough to the quorum endpoint that the attacker does get a choice between the <em>Q₁/Q₂</em> pair and the <em>Q₂/Q₃</em> pair: though <em>Q₂/Q₃</em> is the proper quorum pair for a truthful <em>h</em>=1006 request, we allow him to claim <em>h</em>=1004 (to allow for network latency).</p>
<p>To get a successful signing from the <em>Q₃/Q₄</em> quorum pair, however, the second Blink transaction must request a signing height of at least <em>h</em>=1010, and the quorum won’t accept such a height unless it locally sees at least <em>h</em>=1008. This means the attacker needs to get two new blocks on the network quickly but not too quickly: if too fast, the transaction may reach too many of the <em>Q₁/Q₂</em> quorum members that the first tx signature fails. If too slow, the signed transaction broadcast from <em>Q₁/Q₂</em> service nodes may reach enough <em>Q₃/Q₄</em> service nodes that signing of the second transaction fails. Thus we’ll assume that there is some small window for “goldilocks” timing: timing that is not too fast to reach <em>Q₁/Q₂</em> and not too slow to reach <em>Q₃/Q₄</em> after the first transaction.</p>
<p>The timing of the attack would go like this:</p>
<ol type="1">
<li><p>Privately mine and withhold 2 blocks (heights 1007 and 1008).</p></li>
<li><p>Initiate a Blink signing at <em>h</em>=1004 (thus using the <em>Q₁/Q₂</em> quorum pair).</p></li>
<li><p>Release the withheld blocks; ideally send them directly to <em>Q₃/Q₄</em> quorum members.</p></li>
<li><p>Initiate the conflicting transaction Blink signing at <em>h</em>=1008 (thus using <em>Q₃/Q₄</em>).</p></li>
</ol>
<p>If successful, nodes on the network will end up receiving two conflict Blink transactions with valid signatures. First, for a unique consensus rule, we need to pick a consensus winner, which is easy enough: we simple prefer the Blink transaction with an earlier signing height and reject the later one.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<p>Second, and more important, we want to make the attack to be “impossible”<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. This is done by effectively adding a delay to Blink signing in potentially problematic case, effectively shortening the “goldilocks” window to nothing. Specifically the proposed delay is as follows: when a quorum service node is asked to sign a transaction at height <em>h</em>, it checks the time when it received the critical block that allowed the given quorum pair associated with height <em>h</em>. If this critical block was received less than 5 seconds ago, it delays the Blink checks and signing until at least 5 seconds have elapsed since that critical block was was received by the given service node.</p>
<p>For example, the critical block for a signing height of 1007 would be 1003; for 1010 it would be 1008:</p>
<figure>
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8IS0tIEdlbmVyYXRlZCBieSBncmFwaHZpeiB2ZXJzaW9uIDIuNDAuMSAoMjAxNjEyMjUuMDMwNCkKIC0tPgo8IS0tIFRpdGxlOiBxdW9ydW1zIFBhZ2VzOiAxIC0tPgo8c3ZnIHdpZHRoPSI2OTlwdCIgaGVpZ2h0PSI5M3B0Igogdmlld0JveD0iMC4wMCAwLjAwIDY5OS4wMCA5My4wMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxnIGlkPSJncmFwaDAiIGNsYXNzPSJncmFwaCIgdHJhbnNmb3JtPSJzY2FsZSgxIDEpIHJvdGF0ZSgwKSB0cmFuc2xhdGUoNCA4OC45OTk3KSI+Cjx0aXRsZT5xdW9ydW1zPC90aXRsZT4KPHBvbHlnb24gZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSJ0cmFuc3BhcmVudCIgcG9pbnRzPSItNCw0IC00LC04OC45OTk3IDY5NSwtODguOTk5NyA2OTUsNCAtNCw0Ii8+CjwhLS0gYmxvY2tzIC0tPgo8ZyBpZD0ibm9kZTEiIGNsYXNzPSJub2RlIj4KPHRpdGxlPmJsb2NrczwvdGl0bGU+Cjxwb2x5Z29uIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIwLC0uNSAwLC00Ni41IDY5MSwtNDYuNSA2OTEsLS41IDAsLS41Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjMxLjUiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPmhlaWdodDo8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMCwtMjMuNSA2MywtMjMuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzEuNSIgeT0iLTguMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj5xdW9ydW06PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjYzLC0uNSA2MywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNzciIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPi4uLjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI5MSwtMjMuNSA5MSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMTEzIiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDAyPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjEzNSwtMjMuNSAxMzUsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1NyIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAwMzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIxNzksLTIzLjUgMTc5LC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIyMDEiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMDQ8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNjMsLTIzLjUgMjIzLC0yMy41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIxNDMiIHk9Ii04LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+UeKCgTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyMjMsLS41IDIyMywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMjQ1IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDA1PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjI2NywtMjMuNSAyNjcsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjI4OSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAwNjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIzMTEsLTIzLjUgMzExLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMzMiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMDc8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iMzU1LC0yMy41IDM1NSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzc3IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDA4PC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjM5OSwtMjMuNSAzOTksLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjQyMSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAwOTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSIyMjMsLTIzLjUgNDQzLC0yMy41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSIzMzMiIHk9Ii04LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+UeKCgjwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0NDMsLS41IDQ0MywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDY1IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDEwPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjQ4NywtMjMuNSA0ODcsLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwOSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAxMTwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI1MzEsLTIzLjUgNTMxLC00Ni41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1NTMiIHk9Ii0zMS4zIiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDAwMDAiPjEwMTI8L3RleHQ+Cjxwb2x5bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50cz0iNTc1LC0yMy41IDU3NSwtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTk3IiB5PSItMzEuMyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4xMDEzPC90ZXh0Pgo8cG9seWxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludHM9IjYxOSwtMjMuNSA2MTksLTQ2LjUgIi8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjY0MSIgeT0iLTMxLjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+MTAxNDwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI0NDMsLTIzLjUgNjYzLC0yMy41ICIvPgo8dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1NTMiIHk9Ii04LjMiIGZvbnQtZmFtaWx5PSJUaW1lcyxzZXJpZiIgZm9udC1zaXplPSIxNC4wMCIgZmlsbD0iIzAwMDAwMCI+UeKCgzwvdGV4dD4KPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRzPSI2NjMsLS41IDY2MywtNDYuNSAiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNjc3IiB5PSItMTkuOCIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMDAwIj4uLi48L3RleHQ+CjwvZz4KPCEtLSBibG9ja3MmIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlMSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+YmxvY2tzOmg1JiM0NTsmZ3Q7YmxvY2tzOmgzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMGNkIiBkPSJNMjQ4Ljc3ODUsLTQ2LjY4NTVDMjUwLjU4ODYsLTU4Ljg2MjUgMjQxLjA3ODEsLTcwIDIwMC41LC03MCAxNjguNzk4MywtNzAgMTU2LjA1ODksLTYzLjIwMjIgMTUyLjg2NTQsLTU0LjQyMTgiLz4KPHBvbHlnb24gZmlsbD0iIzAwMDBjZCIgc3Ryb2tlPSIjMDAwMGNkIiBwb2ludHM9IjE1NS40NTk3LC01My45NDE5IDE1Mi4yMjE1LC00Ni42ODU1IDE1MC4yMjc4LC01NC4zNzc1IDE1NS40NTk3LC01My45NDE5Ii8+Cjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE4MS4xMjk0IiB5PSItNzMuNzk5NyIgZm9udC1mYW1pbHk9IlRpbWVzLHNlcmlmIiBmb250LXNpemU9IjE0LjAwIiBmaWxsPSIjMDAwMGNkIj5jcml0aWNhbDwvdGV4dD4KPC9nPgo8IS0tIGJsb2NrcyYjNDU7Jmd0O2Jsb2NrcyAtLT4KPGcgaWQ9ImVkZ2UyIiBjbGFzcz0iZWRnZSI+Cjx0aXRsZT5ibG9ja3M6aDYmIzQ1OyZndDtibG9ja3M6aDM8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwY2QiIGQ9Ik0yOTIuNDk1MiwtNDYuNjg1NUMyOTMuMzgwMSwtNTguODYyNSAyNzkuOTIxOSwtNzAgMjIyLjUsLTcwIDE3Ny4xOTA2LC03MCAxNTkuMjUzNywtNjMuMDY1NiAxNTQuMTM3NCwtNTQuMTU3OCIvPgo8cG9seWdvbiBmaWxsPSIjMDAwMGNkIiBzdHJva2U9IiMwMDAwY2QiIHBvaW50cz0iMTU2LjY3MDMsLTUzLjQ1MjMgMTUyLjUwNDgsLTQ2LjY4NTUgMTUxLjU0MTIsLTU0LjU3MyAxNTYuNjcwMywtNTMuNDUyMyIvPgo8L2c+CjwhLS0gYmxvY2tzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTMiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmJsb2NrczpoNyYjNDU7Jmd0O2Jsb2NrczpoMzwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDBjZCIgZD0iTTMzNi4yMTIsLTQ2LjY4NTVDMzM2LjE3MTYsLTU4Ljg2MjUgMzE4Ljc2NTYsLTcwIDI0NC41LC03MCAxODUuMzE5NiwtNzAgMTYyLjI0NTYsLTYyLjkyNzYgMTU1LjI5MzEsLTUzLjg5MjYiLz4KPHBvbHlnb24gZmlsbD0iIzAwMDBjZCIgc3Ryb2tlPSIjMDAwMGNkIiBwb2ludHM9IjE1Ny43MywtNTIuOTA3OSAxNTIuNzg4LC00Ni42ODU1IDE1Mi43NzEsLTU0LjYzMTcgMTU3LjczLC01Mi45MDc5Ii8+CjwvZz4KPCEtLSBibG9ja3MmIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlNCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+YmxvY2tzOmg4JiM0NTsmZ3Q7YmxvY2tzOmgzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMGNkIiBkPSJNMzgwLjkyMjMsLTQ2LjY4NTVDMzc5LjkzNTcsLTU4Ljg2MjUgMzU4LjQ5MjIsLTcwIDI2NywtNzAgMTkzLjM3NzQsLTcwIDE2NS4xMTI4LC02Mi43ODgzIDE1Ni4zNjY0LC01My42MjYzIi8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwY2QiIHN0cm9rZT0iIzAwMDBjZCIgcG9pbnRzPSIxNTguNjYxMywtNTIuMzM5MiAxNTMuMDc3NywtNDYuNjg1NSAxNTMuOTE3LC01NC41ODcyIDE1OC42NjEzLC01Mi4zMzkyIi8+CjwvZz4KPCEtLSBibG9ja3MmIzQ1OyZndDtibG9ja3MgLS0+CjxnIGlkPSJlZGdlNSIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+YmxvY2tzOmg5JiM0NTsmZ3Q7YmxvY2tzOmgzPC90aXRsZT4KPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMGNkIiBkPSJNNDI0LjYzOTEsLTQ2LjY4NTVDNDIyLjcyNzIsLTU4Ljg2MjUgMzk3LjMzNTksLTcwIDI4OSwtNzAgMjAwLjk3NzEsLTcwIDE2Ny43MTA2LC02Mi42NDc1IDE1Ny4zMDQ3LC01My4zNTg5Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDAwY2QiIHN0cm9rZT0iIzAwMDBjZCIgcG9pbnRzPSIxNTkuNDM2NiwtNTEuODA2OCAxNTMuMzYwOSwtNDYuNjg1NSAxNTQuOTE2OSwtNTQuNDc3OSAxNTkuNDM2NiwtNTEuODA2OCIvPgo8L2c+CjwhLS0gYmxvY2tzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTYiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmJsb2NrczpoMTAmIzQ1OyZndDtibG9ja3M6aDg8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDY0MDAiIGQ9Ik00NjkuNzc4NSwtNDYuNjg1NUM0NzEuNTg4NiwtNTguODYyNSA0NjIuMDc4MSwtNzAgNDIxLjUsLTcwIDM4OS43OTgzLC03MCAzNzcuMDU4OSwtNjMuMjAyMiAzNzMuODY1NCwtNTQuNDIxOCIvPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iMzc2LjQ1OTcsLTUzLjk0MTkgMzczLjIyMTUsLTQ2LjY4NTUgMzcxLjIyNzgsLTU0LjM3NzUgMzc2LjQ1OTcsLTUzLjk0MTkiLz4KPHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNDAyLjEyOTQiIHk9Ii03My43OTk3IiBmb250LWZhbWlseT0iVGltZXMsc2VyaWYiIGZvbnQtc2l6ZT0iMTQuMDAiIGZpbGw9IiMwMDY0MDAiPmNyaXRpY2FsPC90ZXh0Pgo8L2c+CjwhLS0gYmxvY2tzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTciIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmJsb2NrczpoMTEmIzQ1OyZndDtibG9ja3M6aDg8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDY0MDAiIGQ9Ik01MTMuNDk1MiwtNDYuNjg1NUM1MTQuMzgwMSwtNTguODYyNSA1MDAuOTIxOSwtNzAgNDQzLjUsLTcwIDM5OC4xOTA2LC03MCAzODAuMjUzNywtNjMuMDY1NiAzNzUuMTM3NCwtNTQuMTU3OCIvPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iMzc3LjY3MDMsLTUzLjQ1MjMgMzczLjUwNDgsLTQ2LjY4NTUgMzcyLjU0MTIsLTU0LjU3MyAzNzcuNjcwMywtNTMuNDUyMyIvPgo8L2c+CjwhLS0gYmxvY2tzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTgiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmJsb2NrczpoMTImIzQ1OyZndDtibG9ja3M6aDg8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDY0MDAiIGQ9Ik01NTcuMjEyLC00Ni42ODU1QzU1Ny4xNzE2LC01OC44NjI1IDUzOS43NjU2LC03MCA0NjUuNSwtNzAgNDA2LjMxOTYsLTcwIDM4My4yNDU2LC02Mi45Mjc2IDM3Ni4yOTMxLC01My44OTI2Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDY0MDAiIHN0cm9rZT0iIzAwNjQwMCIgcG9pbnRzPSIzNzguNzMsLTUyLjkwNzkgMzczLjc4OCwtNDYuNjg1NSAzNzMuNzcxLC01NC42MzE3IDM3OC43MywtNTIuOTA3OSIvPgo8L2c+CjwhLS0gYmxvY2tzJiM0NTsmZ3Q7YmxvY2tzIC0tPgo8ZyBpZD0iZWRnZTkiIGNsYXNzPSJlZGdlIj4KPHRpdGxlPmJsb2NrczpoMTMmIzQ1OyZndDtibG9ja3M6aDg8L3RpdGxlPgo8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDY0MDAiIGQ9Ik02MDAuOTI4OCwtNDYuNjg1NUM1OTkuOTYzMSwtNTguODYyNSA1NzguNjA5NCwtNzAgNDg3LjUsLTcwIDQxNC4xODU0LC03MCAzODYuMDM5MSwtNjIuNzg4MyAzNzcuMzM4MSwtNTMuNjI2MyIvPgo8cG9seWdvbiBmaWxsPSIjMDA2NDAwIiBzdHJva2U9IiMwMDY0MDAiIHBvaW50cz0iMzc5LjY0MDMsLTUyLjM1MzYgMzc0LjA3MTIsLTQ2LjY4NTUgMzc0Ljg5MDIsLTU0LjU4OTQgMzc5LjY0MDMsLTUyLjM1MzYiLz4KPC9nPgo8IS0tIGJsb2NrcyYjNDU7Jmd0O2Jsb2NrcyAtLT4KPGcgaWQ9ImVkZ2UxMCIgY2xhc3M9ImVkZ2UiPgo8dGl0bGU+YmxvY2tzOmgxNCYjNDU7Jmd0O2Jsb2NrczpoODwvdGl0bGU+CjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwNjQwMCIgZD0iTTY0NC42NDU1LC00Ni42ODU1QzY0Mi43NTQ2LC01OC44NjI1IDYxNy40NTMxLC03MCA1MDkuNSwtNzAgNDIxLjc4ODEsLTcwIDM4OC42MzkxLC02Mi42NDc1IDM3OC4yNzc3LC01My4zNTg5Ii8+Cjxwb2x5Z29uIGZpbGw9IiMwMDY0MDAiIHN0cm9rZT0iIzAwNjQwMCIgcG9pbnRzPSIzODAuNDE4NCwtNTEuODIwNyAzNzQuMzU0NSwtNDYuNjg1NSAzNzUuODkyNiwtNTQuNDgxNCAzODAuNDE4NCwtNTEuODIwNyIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==" alt="Figure 4: Quorum critical blocks" /><figcaption>Figure 4: Quorum critical blocks</figcaption>
</figure>
<p>The whole idea here is to add enough of a delay that the Blink transaction being signed by <em>Q₁/Q₂</em> has time to propagate to enough <em>Q₃/Q₄</em> service nodes that they will see the double-spending attempt and thus fail to build enough signatures to Blink the transaction. 5 seconds should generally be much more than enough for reach all the quorum members, but we don’t actually need it to reach all: rather it is enough to reach just a supermajority-busting minority or <em>either</em> <em>Q₃</em> or <em>Q₄</em> service nodes.</p>
<p>A delay of up to 5-seconds is highly undesirable for a Blink transaction, of course, so it is worth considering how unlikely this delay would be under typical blockchain activity when an honest user is sending a Blink transaction.</p>
<p>Let’s suppose the user submits a transaction to sign at height <em>h=1010</em>, and so quorum service nodes check when they received block <em>h=1008</em> to figure out whether they need to delay. In order to trigger a delay, we need <em>h=1008</em> to have been received by the service node less than 5 seconds before the signing request is received. Adding an extra couple of seconds for blocks to reach service nodes, this means we need to have found 3 (or more) blocks on the network in approximately 7 seconds. Given LOKI’s 120-second block target, the probability of seeing this naturally is approximately 0.000031[^prob_7s]; even if we allowed for increased network latency to delay block transmission by 5 seconds the probability of triggering the delay is still only 0.000091. These probabilities are <em>also</em> worst cases conditional on using the first block in a new quorum (which itself only occurs 1/5 of the time). If we consider the probabilities for a transaction signed at <em>h=1011</em>, we would need 4 network blocks received in the same timeframe: that is, 0.00000046 for a 7-second window and 0.00000188 for a 10-second window.</p>
<p>Thus suffice it to say that the probability of an honest user accidentally hitting the delay is small. Even if they <em>do</em> hit it because of extremely bad luck, the only consequence is a delay of at most 5 seconds for their Blink confirmation.</p>
<h2 id="signature-withholding">5.4 Signature withholding</h2>
<p>The design requires the Blink quorum itself to disseminate the Blink transaction to the network. This has one potential advantage of having the transaction go out faster (service nodes are often better connected), but the more important reason is to prevent the caller from withholding the Blink transaction to cancel out a later Blink transaction. Such an attack would work as follows:</p>
<ol type="1">
<li>Attacker constructs a Blink transaction sending funds to himself; he submits at the current height using quorums <em>Q₁</em> and <em>Q₂</em>. Instead of immediately transmitting the signed transaction to the network, however, he stores it.</li>
<li>He then waits a few blocks for a height that will let him use a different quorum pair, <em>Q₃</em> and <em>Q₄</em>.</li>
<li>The attacker constructs another Blink transaction sending the same outputs to an exotic car dealer who, seeing the Blink transaction on the network, hands over the keys to a brand new Italian sports car.</li>
<li>While driving off, the attacker releases the initial Blink signatures which replaces the car payment transaction with his earlier transaction to himself, making the car payment permanently unspendable.</li>
</ol>
<p>To avoid the problem, we need to force the transaction dissemination as quickly as possible: thus mandating that the service node quorums should themselves broadcast it; this effectively means the Blink transaction will be broadcast to the network from 14–20 well-connected nodes. As a side effect, this broad dissemination method also ensures that Blink transactions reach all nodes very quickly.</p>
<h2 id="attack-to-reorganize-the-blink-quorum">5.5 51% attack to reorganize the Blink quorum</h2>
<p>The idea behind this attack is that an attacker would submit a blink transaction then attempt to invalidate it by using a 51% attack to reorganize the blockchain far enough back as to disrupt the quorum seed, thus making the blink signatures on the transaction no longer valid. This attack is prevented by requiring a long (35-block) lag for quorum determination <em>and</em> not having service nodes sign a transaction if they do not see their quorum seed height as checkpoint-immutable. See <a href="#quorum-selection-block-and-checkpointing-rationale">Quorum selection block and checkpointing rationale</a> for more details.</p>
<h1 id="future-ideas">6 Future ideas</h1>
<p>There are myriad ways the Blink implementation could be extended and advanced; this section is laying out some of them. Note that there is no guarantee that all of these will be implemented.</p>
<h2 id="dynamic-fees">6.1 Dynamic fees</h2>
<p>In the <a href="#fees">Fees</a> section we currently mandate that the miner transaction fee for a Blink transaction must always be set to the “normal” priority fee. This is sub-optimal: a dynamic system that sets a fee based on the blockchain activity. For example, the transaction priority (and thus the fee) could be calculated by considering the average fee and fill percentage of the 60 blocks ending 30 blocks before the Blink height to calculate a fee. The Blink portion of the fee could similarly be dynamic based on the number of recent Blink transactions on the blockchain.</p>
<h2 id="merging-transactions">6.2 Merging transactions</h2>
<p>Given a pair of Blink transactions on the mempool, it ought to be possible to merge them into a single transaction. For example, if Kee blinks funds to Jason and Jason reblinks those funds to Simon, it ought to be possible (at least in some situations) to merge the transactions in such a way that both can be replaced with a single merged transaction that spends all the same outputs and pays the right recipients, but is combined into a single, smaller transaction on the blockchain.</p>
<p>The privacy components of Loki’s underlying design certainly complicates the idea, but it is worth pursuing at least some research into whether and how this could be accomplished.</p>
<p>In theory this combining could also be done for regular transactions, but starting this with Blink with its much stronger guarantees of blockchain acceptance seems safer.</p>
<h2 id="allowing-different-blink-supermajority-levels">6.3 Allowing different Blink supermajority levels</h2>
<p>In this plan we simply specify a quorum of 10 and supermajority of 7. It seems plausible, however, to let advanced users require an extra paranoid level of security by including a flag requesting a higher level of signing: for example, requiring 8 or 9 signatures per quorum. This would increase the likelihood of failures due to quorum communication issues, and would likely slightly increase the typical Blink time, but would be entirely feasible to support.</p>
<p>One question mark around this is whether it would be a particularly valuable addition for LOKI users. On the one hand it would allow extra choice, but there is uncertainty as to whether this extra choice would actually be used.</p>
<p>A larger concern is that the option of a “more secure” mode would imply that the default 7/10 supermajority requirement is somehow less secure, despite the design (as laid out in this document) explicitly targetting building a secure system.</p>
<p>Indeed the only security gained from a higher quorum level is higher protection again quorum ownership by an adversary. As the statistics in the <a href="#overlapping-quorums-rationale">Overlapping quorums rationale</a> point out, however, this is already an extremely low risk even for someone in control of a huge portion of the network’s service nodes.</p>
<p>Thus it might be preferable to <em>not</em> offer such a feature explicitly to undermine that the current Blink system is already designed to be highly secure. Users who need an extra paranoid level of security will always be better off using a regular transaction and waiting for many confirmations plus service node checkpoints.</p>
<h2 id="quorum-communication-via-mesh-network">6.4 Quorum communication via mesh network</h2>
<p>The idea proposed above for intra-quorum communication is simple, but probably does not scale well to larger quorum (such as the 20-node quorum used for checkpoints). An alternative approach is to use a partially connected mesh network over which some SNs route messages for other SNs. This complicated the mechanism (because more node-to-node routing is required) and slightly reduces the speed, but network latency is less of a concern for checkpointing than it is for Blink transactions.</p>
<h2 id="carrying-traffic-over-lokinet">6.5 Carrying traffic over lokinet</h2>
<p>One aspect to consider in the future is the possibility of carrying all blink coordination traffic over lokinet rather than establishing direct public IP SN-to-SN connections. Such transmission can still be fast by using 0-hop paths within lokinet (which are effectively just encrypted direction connections). There is no particular reason that this data needs to be encrypted or hidden, but this would have some advantage for lokinet by providing cover traffic, and would let lokinet deal with any connection nuances.</p>
<p>One technical caveat raised by lokinet devs when discussing this idea is that we would have to take steps to ensure that lokinet’s connectivity parameters remain sufficiently high to not partition the network:</p>
<blockquote>
<p>So the idea is that snodes within a quorum are going to talk to each other. If this goes over 0-hop lokinet then their lokinet routers will have connections to one-another. This is fine. The possible issue arises because lokinet routers have a preset minimum number of connections to other routers that they want to maintain. If this minimum is low enough that it is satisfied by the quorum size then the routers may not seek out connections to other routers and, in theory, that quorum could become partitioned from the network by way of all the routers only connecting to one-another and not other routers outside their quorum.</p>
<p>It doesn’t seem super likely to happen, and is easily prevented anyway by setting <code>min_conn_count</code> &gt; <code>quorum_size</code>, but it is technically possible without that mitigation so I figure we may as well set our desired minimum connection count for the routers higher just in case.</p>
</blockquote>
<p>Another possibility is to include some sort of flag to tell lokinet to not consider this a connection for the purposes of maintaining the minimum connection count.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>This split is purely for the sake of example and not meant to be taken as a concrete plan to change the coinbase reward to these particular values. Any such change in reward structure is obviously entirely outside the purview of this document.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>A node that is one minute behind the network will fall to more than 2 blocks away from the proper height 0.18% of the time; with two minute lag the node will exceed 2 blocks 1.89% of the time; a thirty-second-slow node will be a problem 0.013% of the time. Since a node lagging by any of these values occurs only rarely (not consistently), the actual probability of users encountering such failures on a decently connected node should be much lower.<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>It is possible for the quorum to return an error status indicating that the lokid should retry at a new height; it is up to the lokid whether it wants to do this or return an error to the client.<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>This is actually a bit more complicated because new transactions can be submitted that spend the Blink transaction outputs or that include the Blink transaction outputs as a decoy. That means those transactions themselves will depend on the Blink transaction, adding further chaining.<a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>Effectively the only way to get a tx in block <em>h</em> that refers to a tx in block <em>h</em> or <em>h-1</em> is if a blockchain reorganization that dumps transactions back into the mempool happens; this typically only occurs in a 51% attack so can be considered rare enough to provide a high assurance of the link between transactions.<a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>This case is virtually impossible in normal operations, but it must still be specified and handled for completeness of consensus rules.<a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>You could hop further, of course, to <em>Q₄</em> and <em>Q₅</em>, but the attack is the same: it is just more costly to pull off.<a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>In theory there could be transactions that reference the second transaction’s outputs that would also need to be ejected from the mempool. Given that the window of opportunity here is extremely small, this seems a negligible concern.<a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>In a practical sense, of course. More technically, we want the attack to be extremely difficult to carry out.<a href="#fnref9" class="footnote-back">↩</a></p></li>
</ol>
</section>
</body>
</html>
